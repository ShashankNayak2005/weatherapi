<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tour Connect - Discover Coastal Karnataka</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0066cc;
            --secondary-color: #00a86b;
            --accent-color: #ff7e00;
            --dark-color: #1a1a2e;
            --light-color: #f8f9fa;
            --danger-color: #dc3545;
            --success-color: #28a745;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            background-color: #f5f5f5;
        }

        body.modal-open {
            overflow: hidden;
        }

        /* Navigation Styles */
        .navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
            color: white !important;
        }

        .navbar-nav .nav-link {
            color: white !important;
            margin: 0 10px;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .navbar-nav .nav-link:hover {
            transform: translateY(-2px);
        }

        .navbar-nav .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-color);
            transition: width 0.3s ease;
        }

        .navbar-nav .nav-link:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero-section {
            margin-top: 70px;
            height: 90vh;
            position: relative;
            overflow: hidden;
        }

        .hero-carousel {
            height: 100%;
            position: relative;
        }

        .carousel-item {
            height: 100%;
            position: relative;
        }

        .carousel-item img {
            height: 100%;
            object-fit: cover;
            filter: brightness(0.7);
        }

        .carousel-caption {
            bottom: 30%;
            text-align: center;
        }

        .carousel-caption h1 {
            font-size: 3.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            animation: fadeInUp 1s ease;
        }

        .carousel-caption p {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            animation: fadeInUp 1.2s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Auth Section */
        .auth-section {
            display: none;
            padding: 80px 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .auth-container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 40px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
        }

        .auth-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }

        .auth-tab.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-control {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }

        .btn-primary-custom {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-primary-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 102, 204, 0.3);
        }

        /* Dashboard Section */
        .dashboard-section {
            display: none;
            padding: 80px 0;
            min-height: 100vh;
            background-color: #f8f9fa;
        }

        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .dashboard-header {
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .dashboard-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .dashboard-card-image {
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            opacity: 0.1;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .dashboard-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .dashboard-card h3 {
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        /* Destination Section */
        .destination-section {
            display: none;
            padding: 80px 0;
            min-height: 100vh;
            background-color: #f8f9fa;
        }

        .destination-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Weather Search Styles */
        .weather-search-container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .search-box {
            display: flex;
            gap: 10px;
            max-width: 600px;
            position: relative;
        }

        .search-box input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .search-box input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .search-box button {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
        }

        /* Autocomplete Styles */
        .autocomplete-container {
            position: relative;
            flex: 1;
        }

        .autocomplete-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--primary-color);
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: none;
        }

        .autocomplete-dropdown.show {
            display: block;
        }

        .autocomplete-item {
            padding: 12px 15px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .autocomplete-item:last-child {
            border-bottom: none;
        }

        .autocomplete-item:hover {
            background-color: #f8f9fa;
        }

        .autocomplete-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        .autocomplete-item i {
            color: var(--primary-color);
            font-size: 0.9rem;
        }

        .autocomplete-item.active i {
            color: white;
        }

        .autocomplete-item .city-name {
            font-weight: 600;
        }

        .autocomplete-item .city-country {
            font-size: 0.85rem;
            opacity: 0.7;
            margin-left: auto;
        }

        .search-result {
            display: none;
        }

        .search-result.show {
            display: block;
        }

        .weather-result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .weather-result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .weather-result-header h3 {
            margin: 0;
            font-size: 2rem;
        }

        .weather-icon-large {
            font-size: 4rem;
        }

        .weather-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .weather-detail-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .weather-detail-item i {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .weather-detail-item .value {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
        }

        .weather-detail-item .label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .city-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .city-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .city-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .city-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .city-card-content {
            padding: 20px;
        }

        .city-card h3 {
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .weather-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 5px;
        }

        .weather-sunny {
            background-color: #fff3cd;
            color: #856404;
        }

        .weather-rainy {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .weather-cold {
            background-color: #d6d8db;
            color: #383d41;
        }

        .weather-alert {
            background-color: #f8d7da;
            color: #721c24;
        }

        .book-now-btn {
            background: linear-gradient(135deg, var(--accent-color), #ff6b6b);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
        }

        .book-now-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 126, 0, 0.3);
        }

        /* City Details Modal */
        .city-details-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            overflow-y: auto;
        }

        .city-details-content {
            background: white;
            max-width: 900px;
            margin: 50px auto;
            border-radius: 10px;
            padding: 30px;
            position: relative;
            animation: slideIn 0.3s ease;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: var(--danger-color);
        }

        .city-image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .city-image-gallery img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }

        .city-image-gallery img:hover {
            transform: scale(1.05);
        }

        .info-section {
            margin: 25px 0;
        }

        .info-section h4 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .info-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .info-item i {
            font-size: 1.2rem;
            margin-right: 10px;
            color: var(--secondary-color);
        }

        /* Detailed Weather Styles */
        .weather-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .weather-detail-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .weather-detail-card:hover {
            transform: translateY(-5px);
        }

        .weather-detail-card.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .weather-detail-card.success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .weather-detail-card.warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .weather-detail-card.info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .weather-detail-card i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .weather-detail-card .value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .weather-detail-card .label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .forecast-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .forecast-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .forecast-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 5px 15px rgba(0, 102, 204, 0.2);
        }

        .forecast-card .day {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .forecast-card .temps {
            font-size: 1.2rem;
            margin: 10px 0;
        }

        .forecast-card .max-temp {
            color: #dc3545;
            font-weight: bold;
        }

        .forecast-card .min-temp {
            color: #0066cc;
        }

        .sun-times {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 10px;
        }

        .sun-time {
            text-align: center;
        }

        .sun-time i {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .sun-time .time {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .sun-time .label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Booking Modal */
        .booking-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 3000;
            overflow-y: auto;
        }

        .booking-content {
            background: white;
            max-width: 600px;
            margin: 50px auto;
            border-radius: 10px;
            padding: 30px;
            position: relative;
            animation: slideIn 0.3s ease;
        }

        .booking-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .booking-header h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .booking-form .form-group {
            margin-bottom: 20px;
        }

        .booking-form label {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .booking-form .form-control {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .booking-form .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }

        .btn-book-submit {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-book-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 168, 107, 0.3);
        }

        /* Quote Display */
        .quote-display {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            z-index: 4000;
            max-width: 600px;
            text-align: center;
            animation: quoteAppear 0.5s ease;
        }

        @keyframes quoteAppear {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .quote-display h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .quote-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 20px;
            font-style: italic;
        }

        .quote-author {
            font-size: 1rem;
            opacity: 0.9;
        }

        .quote-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .quote-close:hover {
            opacity: 1;
        }

        .quote-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* Booking Management Modal */
        .booking-management-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 3000;
            overflow-y: auto;
        }

        .booking-management-content {
            background: white;
            max-width: 900px;
            margin: 50px auto;
            border-radius: 10px;
            padding: 30px;
            position: relative;
            animation: slideIn 0.3s ease;
        }

        .booking-list {
            margin-top: 20px;
        }

        .booking-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s ease;
        }

        .booking-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .booking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .booking-id {
            font-weight: bold;
            color: var(--primary-color);
        }

        .booking-status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-confirmed {
            background-color: #d4edda;
            color: #155724;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-cancelled {
            background-color: #f8d7da;
            color: #721c24;
        }

        .booking-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .booking-detail-item {
            display: flex;
            align-items: center;
        }

        .booking-detail-item i {
            margin-right: 8px;
            color: var(--secondary-color);
        }

        .booking-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-action {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-modify {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-modify:hover {
            background-color: #0056b3;
        }

        .btn-cancel {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-cancel:hover {
            background-color: #c82333;
        }

        /* Destination Management Modal */
        .destination-management-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 3000;
            overflow-y: auto;
        }

        .destination-management-content {
            background: white;
            max-width: 1000px;
            margin: 50px auto;
            border-radius: 10px;
            padding: 30px;
            position: relative;
            animation: slideIn 0.3s ease;
        }

        .destination-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
        }

        .destination-tab {
            padding: 15px 30px;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .destination-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .destination-form {
            display: none;
        }

        .destination-form.active {
            display: block;
        }

        .destination-list {
            margin-top: 20px;
        }

        .destination-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .destination-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .destination-info h4 {
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .destination-info p {
            margin: 0;
            color: #666;
        }

        .destination-actions {
            display: flex;
            gap: 10px;
        }

        .btn-edit {
            background-color: var(--secondary-color);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-edit:hover {
            background-color: #00875a;
        }

        .btn-delete {
            background-color: var(--danger-color);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-delete:hover {
            background-color: #c82333;
        }

        /* Feedback Modal */
        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 3000;
            overflow-y: auto;
        }

        .feedback-content {
            background: white;
            max-width: 600px;
            margin: 50px auto;
            border-radius: 10px;
            padding: 30px;
            position: relative;
            animation: slideIn 0.3s ease;
        }

        .feedback-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .feedback-header h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .feedback-form .form-group {
            margin-bottom: 20px;
        }

        .feedback-form label {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .feedback-form .form-control {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .feedback-form .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }

        .rating-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
        }

        .rating-input i {
            font-size: 2rem;
            color: #ddd;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .rating-input i:hover,
        .rating-input i.active {
            color: var(--accent-color);
        }

        .btn-feedback-submit {
            background: linear-gradient(135deg, var(--accent-color), #ff6b6b);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-feedback-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 126, 0, 0.3);
        }

        /* Feedback Section */
        .feedback-section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .feedback-list {
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .feedback-item {
            padding: 20px;
            border-bottom: 1px solid #eee;
            transition: all 0.3s ease;
        }

        .feedback-item:hover {
            background: #f8f9fa;
            border-radius: 8px;
        }

        .feedback-item:last-child {
            border-bottom: none;
        }

        .feedback-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-author {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .feedback-date {
            color: #666;
            font-size: 0.85rem;
        }

        .feedback-content {
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .feedback-destination {
            display: inline-block;
            background: var(--light-color);
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.85rem;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .rating {
            color: var(--accent-color);
        }

        .rating i {
            margin-right: 2px;
        }

        /* Profile Dropdown */
        .profile-dropdown {
            position: relative;
        }

        .profile-menu {
            position: absolute;
            right: 0;
            top: 100%;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 250px;
            padding: 15px;
            display: none;
            z-index: 1001;
        }

        .profile-menu.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .profile-header {
            display: flex;
            align-items: center;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            margin-bottom: 10px;
        }

        .profile-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 10px;
        }

        .profile-info h5 {
            margin: 0;
            font-size: 1rem;
        }

        .profile-info p {
            margin: 0;
            font-size: 0.85rem;
            color: #666;
        }

        .profile-actions {
            margin-top: 10px;
        }

        .profile-action-btn {
            display: block;
            width: 100%;
            padding: 8px 15px;
            text-align: left;
            background: none;
            border: none;
            color: #333;
            cursor: pointer;
            transition: background 0.3s ease;
            border-radius: 5px;
        }

        .profile-action-btn:hover {
            background: #f8f9fa;
        }

        .profile-action-btn i {
            margin-right: 10px;
            width: 20px;
        }

        /* About and Contact Sections */
        .content-section {
            display: none;
            padding: 80px 0;
            min-height: 100vh;
        }

        .content-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .content-card {
            background: white;
            border-radius: 10px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .content-card h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .content-card p {
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .contact-form {
            margin-top: 30px;
        }

        .contact-form .form-group {
            margin-bottom: 20px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .carousel-caption h1 {
                font-size: 2rem;
            }

            .carousel-caption p {
                font-size: 1rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .city-grid {
                grid-template-columns: 1fr;
            }

            .quote-display {
                margin: 20px;
                padding: 30px 20px;
            }

            .booking-management-content,
            .destination-management-content,
            .feedback-content {
                margin: 20px;
                padding: 20px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Notification Toast */
        .notification-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: none;
            align-items: center;
            z-index: 3000;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }

        .notification-toast.show {
            display: flex;
        }

        .notification-toast.success {
            border-left: 4px solid var(--success-color);
        }

        .notification-toast.error {
            border-left: 4px solid var(--danger-color);
        }

        .notification-toast i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .notification-toast.success i {
            color: var(--success-color);
        }

        .notification-toast.error i {
            color: var(--danger-color);
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="showSection('home')">
                <i class="fas fa-umbrella-beach me-2"></i>Tour Connect
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('home')">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('about')">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('destinations')">Destinations</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('contact')">Contact Us</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <div class="profile-dropdown">
                        <button class="btn btn-outline-light" onclick="toggleProfileMenu()">
                            <i class="fas fa-user-circle me-1"></i> Profile
                        </button>
                        <div class="profile-menu" id="profileMenu">
                            <div class="profile-header">
                                <div class="profile-avatar" id="profileAvatar">U</div>
                                <div class="profile-info">
                                    <h5 id="profileName">Guest User</h5>
                                    <p id="profileEmail">Not logged in</p>
                                </div>
                            </div>
                            <div class="profile-actions">
                                <button class="profile-action-btn" onclick="showAuthSection()">
                                    <i class="fas fa-sign-in-alt"></i> Login / Register
                                </button>
                                <button class="profile-action-btn" id="dashboardBtn" style="display:none;" onclick="showDashboard()">
                                    <i class="fas fa-tachometer-alt"></i> Dashboard
                                </button>
                                <button class="profile-action-btn" id="logoutBtn" style="display:none;" onclick="logout()">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section" id="homeSection">
        <div id="heroCarousel" class="carousel slide hero-carousel" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="images/Coastal Beach.jpg" class="d-block w-100" alt="Coastal Beach">
                    <div class="carousel-caption">
                        <h1>Discover Coastal Karnataka</h1>
                        <p>Experience the beauty of pristine beaches and ancient temples</p>
                        <button class="btn btn-lg btn-warning" onclick="showAuthSection()">Start Your Journey</button>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="images/indian-temple-4782312_1280.jpg" class="d-block w-100" alt="Temple">
                    <div class="carousel-caption">
                        <h1>Ancient Temples & Rich Heritage</h1>
                        <p>Explore centuries of culture and spirituality</p>
                        <button class="btn btn-lg btn-warning" onclick="showSection('destinations')">Explore Destinations</button>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="images/Nature.jpg" class="d-block w-100" alt="Nature">
                    <div class="carousel-caption">
                        <h1>Nature's Paradise</h1>
                        <p>Immerse yourself in breathtaking landscapes</p>
                        <button class="btn btn-lg btn-warning" onclick="showSection('about')">Learn More</button>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>
    </section>

    <!-- Auth Section -->
<section class="auth-section" id="authSection">
    <div class="auth-container">
        <div class="auth-tabs">
            <div class="auth-tab active" onclick="switchAuthTab('login')">Login</div>
            <div class="auth-tab" onclick="switchAuthTab('register')">Register</div>
        </div>
        
        <!-- Login Form -->
        <div id="loginForm">
            <h3 class="text-center mb-4">Welcome Back</h3>
            
            <div class="demo-accounts mb-4 p-3 bg-light rounded">
                <h5><i class="fas fa-info-circle me-2"></i> Demo Accounts</h5>
                <p class="mb-1"><strong>Regular User:</strong> user@example.com / password123</p>
                <p class="mb-0"><strong>Admin User:</strong> admin@example.com / admin123</p>
            </div>
            
            <div class="alert alert-error" id="loginError"></div>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" class="form-control" id="loginEmail" required>
                </div>
                <div class="form-group password-toggle">
                    <label for="loginPassword">Password</label>
                    <input type="password" class="form-control" id="loginPassword" required>
                    <i class="far fa-eye" id="toggleLoginPassword"></i>
                </div>
                <div class="form-group">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="isAdminLogin">
                        <label class="form-check-label" for="isAdminLogin">
                            Login as Admin
                        </label>
                    </div>
                </div>
                
                <button type="submit" class="btn-primary-custom">Login</button>
                <div class="text-center mt-3">
                    <a href="#" onclick="showForgotPassword()">Forgot Password?</a>
                </div>
            </form>
        </div>
        
       <!-- Register Form -->
<div id="registerForm" style="display:none;">
    <h3 class="text-center mb-4">Create Account</h3>
    <div class="alert alert-success" id="registerSuccess" style="display:none;"></div>
    <div class="alert alert-danger" id="registerError" style="display:none;"></div>
    
    <form id="registerFormElement" onsubmit="handleRegister(event)">
        <div class="form-group">
            <label for="registerName" class="form-label">Full Name</label>
            <input type="text" id="registerName" class="form-control" placeholder="Your name" required />
        </div>
        <div class="form-group">
            <label for="registerEmail" class="form-label">Email</label>
            <input type="email" id="registerEmail" class="form-control" placeholder="you@example.com" required />
        </div>
        <div class="form-group">
            <label for="registerPassword" class="form-label">Password</label>
            <input type="password" id="registerPassword" class="form-control" placeholder="Min 8 characters" required oninput="checkPasswordStrength()" />
            <div class="mt-2" aria-hidden="true">
                <div style="height:6px;background:#eee;border-radius:4px;overflow:hidden;">
                    <div id="passwordStrengthBar" style="height:6px;width:0;background:#dc3545;transition:width .2s, background .2s;"></div>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="confirmPassword" class="form-label">Confirm Password</label>
            <input type="password" id="confirmPassword" class="form-control" placeholder="Re-enter password" required />
        </div>
        <button type="submit" class="btn-primary-custom w-100 mt-2">Register</button>
    </form>
</div>
        
        <!-- Forgot Password Form -->
        <div id="forgotPasswordForm" style="display:none;">
            <h3 class="text-center mb-4">Reset Password</h3>
            <div class="alert alert-success" id="forgotPasswordSuccess"></div>
            <div class="alert alert-error" id="forgotPasswordError"></div>
            
            <form onsubmit="handleForgotPassword(event)">
                <div class="form-group">
                    <label for="forgotPasswordEmail">Email Address</label>
                    <input type="email" class="form-control" id="forgotPasswordEmail" required>
                </div>
                <button type="submit" class="btn-primary-custom">Send Reset Link</button>
                <div class="text-center mt-3">
                    <a href="#" onclick="switchAuthTab('login')">Back to Login</a>
                </div>
            </form>
        </div>
    </div>
</section>

    <!-- Dashboard Section -->
    <section class="dashboard-section" id="dashboardSection">
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h2 id="dashboardTitle">User Dashboard</h2>
                <p class="text-muted">Manage your travel plans and bookings</p>
            </div>
            
            <div class="dashboard-grid" id="userDashboard">
                <div class="dashboard-card" onclick="openBookingManagement()">
                    <i class="fas fa-calendar-check"></i>
                    <img src="https://picsum.photos/seed/booking-manage/100/100.jpg" class="dashboard-card-image" alt="Manage Bookings">
                    <h3>Manage Bookings</h3>
                    <p>View, modify, or cancel your travel bookings</p>
                </div>
                <div class="dashboard-card" onclick="openBookingModal()">
                    <i class="fas fa-plus-circle"></i>
                    <img src="https://picsum.photos/seed/booking-system/100/100.jpg" class="dashboard-card-image" alt="Booking System">
                    <h3>Booking System</h3>
                    <p>Create new travel bookings instantly</p>
                </div>
                <div class="dashboard-card" onclick="showSection('destinations')">
                    <i class="fas fa-map-marked-alt"></i>
                    <img src="https://picsum.photos/seed/destination-plan/100/100.jpg" class="dashboard-card-image" alt="Destination Plans">
                    <h3>Destination Plans</h3>
                    <p>Explore amazing destinations</p>
                </div>
                <div class="dashboard-card" onclick="openFeedbackModal()">
                    <i class="fas fa-comment-dots"></i>
                    <img src="https://picsum.photos/seed/feedback/100/100.jpg" class="dashboard-card-image" alt="Give Feedback">
                    <h3>Give Feedback</h3>
                    <p>Share your travel experience</p>
                </div>
            </div>
            
            <div class="dashboard-grid" id="adminDashboard" style="display:none;">
                <div class="dashboard-card" onclick="openDestinationManagement()">
                    <i class="fas fa-map"></i>
                    <img src="https://picsum.photos/seed/manage-destinations/100/100.jpg" class="dashboard-card-image" alt="Manage Destinations">
                    <h3>Manage Destinations</h3>
                    <p>Add and update destination information</p>
                </div>
                <div class="dashboard-card" onclick="openAdminBookingManagement()">
                    <i class="fas fa-clipboard-list"></i>
                    <img src="https://picsum.photos/seed/manage-bookings/100/100.jpg" class="dashboard-card-image" alt="Manage Bookings">
                    <h3>Manage Bookings</h3>
                    <p>View and manage all user bookings</p>
                </div>
                <div class="dashboard-card" onclick="showViewFeedback()">
                    <i class="fas fa-comments"></i>
                    <img src="https://picsum.photos/seed/view-feedback/100/100.jpg" class="dashboard-card-image" alt="View Feedback">
                    <h3>View Feedback</h3>
                    <p>Check user feedback and suggestions</p>
                </div>
            </div>
            
            <div class="feedback-section">
                <h3>Recent Feedback</h3>
                <div class="feedback-list" id="feedbackList">
                    <!-- Feedback items will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Destinations Section -->
    <section class="destination-section" id="destinationsSection">
        <div class="destination-container">
            <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
                <div>
                    <h2 class="mb-0">Explore Karnataka's Coastal Cities</h2>
                    <small class="text-success" id="weatherUpdateTime">
                        <i class="fas fa-spinner fa-spin me-1"></i>Loading live weather...
                    </small>
                </div>
                <button class="btn btn-outline-primary" onclick="refreshWeatherData()" id="refreshWeatherBtn" title="Refresh live weather data">
                    <i class="fas fa-sync-alt me-2"></i>Refresh Weather
                </button>
            </div>
            
            <!-- Weather Search Section -->
            <div class="weather-search-container mb-4">
                <h4 class="mb-3"><i class="fas fa-search-location me-2"></i>Search Weather by Location</h4>
                <div class="search-box">
                    <div class="autocomplete-container">
                        <input type="text" id="locationSearch" class="form-control" placeholder="Enter city name (e.g., Bangalore, Mumbai, Delhi)" autocomplete="off" />
                        <div id="autocompleteDropdown" class="autocomplete-dropdown"></div>
                    </div>
                    <button class="btn btn-primary" onclick="searchLocationWeather()">
                        <i class="fas fa-search me-2"></i>Search
                    </button>
                </div>
                <div id="searchWeatherResult" class="search-result mt-3"></div>
            </div>

            <div class="city-grid" id="cityGrid"></div>
                <!-- Cities will be dynamically loaded here -->
            </div>
        </div>
    </section>

    <!-- City Details Modal -->
    <div class="city-details-modal" id="cityDetailsModal">
        <div class="city-details-content">
            <span class="close-modal" onclick="closeCityDetails()">&times;</span>
            <h2 id="cityDetailsTitle">City Name</h2>
            <div class="city-image-gallery" id="cityImageGallery">
                <!-- Images will be dynamically loaded here -->
            </div>
            
            <!-- Detailed Weather Section -->
            <div class="info-section" id="detailedWeatherSection">
                <h4><i class="fas fa-cloud-sun me-2"></i>Current Weather & Forecast</h4>
                <div id="detailedWeather">
                    <!-- Detailed weather will be dynamically loaded here -->
                </div>
            </div>
            
            <div class="info-section">
                <h4>Nearby Tourist Places</h4>
                <div class="info-grid" id="nearbyPlaces">
                    <!-- Places will be dynamically loaded here -->
                </div>
            </div>
            
            <div class="info-section">
                <h4>Accommodation</h4>
                <div class="info-grid" id="nearbyStays">
                    <!-- Stays will be dynamically loaded here -->
                </div>
            </div>
            
            <div class="info-section">
                <h4>Transportation</h4>
                <div class="info-grid" id="transportation">
                    <!-- Transportation info will be dynamically loaded here -->
                </div>
            </div>
            
            <button class="book-now-btn" onclick="openBookingModal()">
                <i class="fas fa-calendar-plus me-2"></i>Book Now
            </button>
        </div>
    </div>

    <!-- Booking Modal -->
    <div class="booking-modal" id="bookingModal">
        <div class="booking-content">
            <span class="close-modal" onclick="closeBookingModal()">&times;</span>
            <div class="booking-header">
                <h2>Book Your Journey</h2>
                <p class="text-muted">Fill in the details to confirm your booking</p>
            </div>
            
            <form class="booking-form" onsubmit="handleBookingSubmit(event)">
                <div class="form-group">
                    <label for="bookingName">Full Name</label>
                    <input type="text" class="form-control" id="bookingName" required>
                </div>
                
                <div class="form-group">
                    <label for="bookingEmail">Email Address</label>
                    <input type="email" class="form-control" id="bookingEmail" required>
                </div>
                
                <div class="form-group">
                    <label for="bookingPhone">Phone Number</label>
                    <input type="tel" class="form-control" id="bookingPhone" required>
                </div>
                
                <div class="form-group">
                    <label for="bookingMembers">Number of Members</label>
                    <input type="number" class="form-control" id="bookingMembers" min="1" required>
                </div>
                
                <div class="form-group">
                    <label for="bookingDestination">Destination</label>
                    <select class="form-control" id="bookingDestination" required>
                        <option value="">Select a destination</option>
                        <option value="Mangalore">Mangalore</option>
                        <option value="Udupi">Udupi</option>
                        <option value="Gokarna">Gokarna</option>
                        <option value="Karwar">Karwar</option>
                        <option value="Murudeshwar">Murudeshwar</option>
                        <option value="Malpe">Malpe</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="bookingArrival">Arrival Date & Time</label>
                    <input type="datetime-local" class="form-control" id="bookingArrival" required>
                </div>
                
                <button type="submit" class="btn-book-submit">
                    <i class="fas fa-check-circle me-2"></i>Submit Booking Details
                </button>
            </form>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-content">
            <span class="close-modal" onclick="closeFeedbackModal()">&times;</span>
            <div class="feedback-header">
                <h2>Share Your Feedback</h2>
                <p class="text-muted">We value your travel experience</p>
            </div>
            
            <form class="feedback-form" onsubmit="handleFeedbackSubmit(event)">
                <div class="form-group">
                    <label for="feedbackName">Your Name</label>
                    <input type="text" class="form-control" id="feedbackName" required>
                </div>
                
                <div class="form-group">
                    <label for="feedbackDestination">Destination Visited</label>
                    <select class="form-control" id="feedbackDestination" required>
                        <option value="">Select a destination</option>
                        <option value="Mangalore">Mangalore</option>
                        <option value="Udupi">Udupi</option>
                        <option value="Gokarna">Gokarna</option>
                        <option value="Karwar">Karwar</option>
                        <option value="Murudeshwar">Murudeshwar</option>
                        <option value="Malpe">Malpe</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="feedbackRating">Rate Your Experience</label>
                    <div class="rating-input" id="ratingInput">
                        <i class="fas fa-star" data-rating="1" onclick="setRating(1)"></i>
                        <i class="fas fa-star" data-rating="2" onclick="setRating(2)"></i>
                        <i class="fas fa-star" data-rating="3" onclick="setRating(3)"></i>
                        <i class="fas fa-star" data-rating="4" onclick="setRating(4)"></i>
                        <i class="fas fa-star" data-rating="5" onclick="setRating(5)"></i>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="feedbackMessage">Your Feedback</label>
                    <textarea class="form-control" id="feedbackMessage" rows="5" placeholder="Share your experience, suggestions, or thoughts..." required></textarea>
                </div>
                
                <button type="submit" class="btn-feedback-submit">
                    <i class="fas fa-paper-plane me-2"></i>Submit Feedback
                </button>
            </form>
        </div>
    </div>

    <!-- Booking Management Modal -->
    <div class="booking-management-modal" id="bookingManagementModal">
        <div class="booking-management-content">
            <span class="close-modal" onclick="closeBookingManagement()">&times;</span>
            <h2>Manage Your Bookings</h2>
            <p class="text-muted">View, modify, or cancel your travel bookings</p>
            
            <div class="booking-list" id="bookingList">
                <!-- Bookings will be dynamically loaded here -->
            </div>
        </div>
    </div>

    <!-- Destination Management Modal -->
    <div class="destination-management-modal" id="destinationManagementModal">
        <div class="destination-management-content">
            <span class="close-modal" onclick="closeDestinationManagement()">&times;</span>
            <h2>Manage Destinations</h2>
            <p class="text-muted">Add new destinations or update existing ones</p>
            
            <div class="destination-tabs">
                <div class="destination-tab active" onclick="switchDestinationTab('add')">Add New Destination</div>
                <div class="destination-tab" onclick="switchDestinationTab('update')">Update Existing</div>
            </div>
            
            <div class="destination-form active" id="addDestinationForm">
                <form onsubmit="handleAddDestination(event)">
                    <div class="form-group">
                        <label for="newDestName">Destination Name</label>
                        <input type="text" class="form-control" id="newDestName" required>
                    </div>
                    <div class="form-group">
                        <label for="newDestDescription">Description</label>
                        <textarea class="form-control" id="newDestDescription" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="newDestImage">Image URL</label>
                        <input type="text" class="form-control" id="newDestImage" placeholder="Enter image URL">
                    </div>
                    <div class="form-group">
                        <label for="newDestWeather">Weather Condition</label>
                        <select class="form-control" id="newDestWeather" required>
                            <option value="sunny">Sunny</option>
                            <option value="rainy">Rainy</option>
                            <option value="cold">Cold</option>
                            <option value="alert">Alert</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary-custom">Add Destination</button>
                </form>
            </div>
            
            <div class="destination-form" id="updateDestinationForm">
                <div class="destination-list" id="destinationList">
                    <!-- Destinations will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Quote Display -->
    <div class="quote-display" id="quoteDisplay">
        <span class="quote-close" onclick="closeQuoteDisplay()">&times;</span>
        <div class="quote-icon">
            <i class="fas fa-quote-left"></i>
        </div>
        <h3>Your Journey Begins!</h3>
        <p class="quote-text" id="quoteText"></p>
        <p class="quote-author" id="quoteAuthor"></p>
    </div>

    <!-- About Section -->
    <section class="content-section" id="aboutSection">
        <div class="content-container">
            <div class="content-card">
                <h2>About Tour Connect</h2>
                <p>Welcome to Tour Connect, your premier gateway to exploring the breathtaking coastal beauty of Karnataka. Our mission is to enhance coastal tourism by providing travelers with comprehensive information, real-time weather updates, and seamless booking experiences.</p>
                <p>Founded with a passion for showcasing Karnataka's pristine beaches, ancient temples, and rich cultural heritage, Tour Connect bridges the gap between travelers and the hidden gems of the coastal region. We believe that every journey should be memorable, well-planned, and perfectly timed with nature's moods.</p>
                <h3>Our Vision</h3>
                <p>To become the most trusted platform for coastal tourism in Karnataka, promoting sustainable travel while preserving the natural beauty and cultural integrity of the region.</p>
                <h3>What We Offer</h3>
                <ul>
                    <li>Comprehensive destination guides for all coastal cities in Karnataka</li>
                    <li>Real-time weather updates and alerts</li>
                    <li>Seamless booking system for accommodations and activities</li>
                    <li>Personalized travel planning tools</li>
                    <li>Community-driven reviews and feedback</li>
                </ul>
                <h3>Our Team</h3>
                <p>Our team consists of passionate travelers, local experts, and technology enthusiasts who work together to create the best possible experience for our users. We combine local knowledge with modern technology to provide accurate, up-to-date information that helps travelers make informed decisions.</p>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="content-section" id="contactSection">
        <div class="content-container">
            <div class="content-card">
                <h2>Contact Us</h2>
                <p>We'd love to hear from you! Whether you have questions, feedback, or suggestions, feel free to reach out to us.</p>
                
                <div class="row mt-4">
                    <div class="col-md-6">
                        <h4>Get in Touch</h4>
                        <p><i class="fas fa-map-marker-alt me-2"></i>MITK</p>
                        <p><i class="fas fa-phone me-2"></i>+91 123456789</p>
                        <p><i class="fas fa-envelope me-2"></i>info@tourconnect.com</p>
                        
                        <h4 class="mt-4">Follow Us</h4>
                        <div class="d-flex gap-3">
                            <a href="#" class="fs-4"><i class="fab fa-facebook"></i></a>
                            <a href="#" class="fs-4"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="fs-4"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="fs-4"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <form class="contact-form" onsubmit="handleContactForm(event)">
                            <div class="form-group">
                                <label for="contactName">Your Name</label>
                                <input type="text" class="form-control" id="contactName" required>
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">Email</label>
                                <input type="email" class="form-control" id="contactEmail" required>
                            </div>
                            <div class="form-group">
                                <label for="contactSubject">Subject</label>
                                <input type="text" class="form-control" id="contactSubject" required>
                            </div>
                            <div class="form-group">
                                <label for="contactMessage">Message</label>
                                <textarea class="form-control" id="contactMessage" rows="5" required></textarea>
                            </div>
                            <button type="submit" class="btn-primary-custom">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Notification Toast -->
    <div class="notification-toast" id="notificationToast">
        <i class="fas fa-check-circle"></i>
        <span id="notificationMessage">Success!</span>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
<script>
    // Global variables
    let currentUser = null;
    let isAdmin = false;
    let selectedCity = null;
    let bookings = [];
    let feedbacks = [];
    let bookingIdCounter = 1000;
    let feedbackIdCounter = 5000;
    let selectedRating = 0;

    // Weather API Configuration - Using Open-Meteo (FREE, NO API KEY REQUIRED!)
    const WEATHER_API_URL = 'https://api.open-meteo.com/v1/forecast';
    
    // City coordinates for weather API
    const cityCoordinates = {
        'Mangalore': { lat: 12.9141, lon: 74.8560 },
        'Udupi': { lat: 13.3409, lon: 74.7421 },
        'Gokarna': { lat: 14.5479, lon: 74.3188 },
        'Karwar': { lat: 14.8134, lon: 74.1296 },
        'Murudeshwar': { lat: 14.0942, lon: 74.4842 },
        'Malpe': { lat: 13.3500, lon: 74.7000 }
    };
    
    // Tourism quotes about Karavali (Coastal Karnataka)
    const tourismQuotes = [
        {
            text: "The waves of Karavali tell stories of ancient kingdoms and modern dreams, where every sunset paints a new masterpiece on the canvas of the Arabian Sea.",
            author: "Local Coastal Wisdom"
        },
        {
            text: "In the land where the Western Ghats kiss the Arabian Sea, every journey becomes a pilgrimage of the soul, and every beach a sanctuary of peace.",
            author: "Karavali Chronicles"
        },
        {
            text: "From the golden sands of Murudeshwar to the sacred shores of Gokarna, Karavali's coastline is a string of pearls adorning India's western crown.",
            author: "Coastal Explorer"
        },
        {
            text: "Where coconut palms dance to the rhythm of ocean waves and ancient temples echo with devotion, Karavali welcomes you with open arms and warm hearts.",
            author: "Karnataka Tourism"
        }
    ];
    
    let cities = [
        {
            id: 1,
            name: "Mangalore",
            weather: "sunny",
            temperature: 28,
            humidity: 65,
            windSpeed: 12,
            rainfall: 0,
            description: "A coastal city known for its pristine beaches and rich cultural heritage.",
            images: [
                "images/m1.jpeg", // Beach
                "images/m2.webp", // Temple
                "images/m3.jpeg"  // Sunset
            ],
            cardImage: "images/m2.webp",
            nearbyPlaces: [
                { name: "Panambur Beach", distance: "12 km" },
                { name: "Someshwara Temple", distance: "8 km" },
                { name: "Kadri Park", distance: "5 km" }
            ],
            stays: [
                { name: "The Ocean Pearl", distance: "3 km", type: "Hotel" },
                { name: "Coastal Retreat", distance: "7 km", type: "Resort" },
                { name: "Beachside Homestay", distance: "10 km", type: "Homestay" }
            ],
            transportation: [
                { name: "Mangalore Central Railway Station", distance: "4 km" },
                { name: "KSRTC Bus Stand", distance: "2 km" },
                { name: "Mangalore International Airport", distance: "15 km" }
            ]
        },
        {
            id: 2,
            name: "Udupi",
            weather: "rainy",
            temperature: 26,
            humidity: 80,
            windSpeed: 15,
            rainfall: 5,
            description: "Famous for its Krishna Temple and delicious Udupi cuisine.",
            images: [
                "images/u1.jpg",
                "images/u2.jpg",
                "images/u3.jpg"
            ],
            cardImage: "images/u2.jpg",
            nearbyPlaces: [
                { name: "Krishna Temple", distance: "2 km" },
                { name: "Malpe Beach", distance: "6 km" },
                { name: "St. Mary's Island", distance: "10 km" }
            ],
            stays: [
                { name: "Paradise Isle Beach Resort", distance: "8 km", type: "Resort" },
                { name: "Udupi Hotel", distance: "1 km", type: "Hotel" },
                { name: "Temple View Guest House", distance: "3 km", type: "Guest House" }
            ],
            transportation: [
                { name: "Udupi Railway Station", distance: "3 km" },
                { name: "Udupi Bus Stand", distance: "2 km" },
                { name: "Mangalore Airport", distance: "60 km" }
            ]
        },
        {
            id: 3,
            name: "Gokarna",
            weather: "sunny",
            temperature: 30,
            humidity: 70,
            windSpeed: 10,
            rainfall: 0,
            description: "A sacred town with beautiful beaches and spiritual significance.",
            images: [
                "images/g1.jpeg", // Beach sunset
                "images/g2.jpeg", // Beach
                "images/g3.jpeg"  // Temple
            ],
            cardImage: "images/g3.jpeg" ,
            nearbyPlaces: [
                { name: "Mahabaleshwar Temple", distance: "1 km" },
                { name: "Kudle Beach", distance: "2 km" },
                { name: "Om Beach", distance: "4 km" }
            ],
            stays: [
                { name: "Namaste Yoga Farm", distance: "3 km", type: "Retreat" },
                { name: "Swaswara", distance: "5 km", type: "Resort" },
                { name: "Kudle Beach Huts", distance: "2 km", type: "Beach Hut" }
            ],
            transportation: [
                { name: "Gokarna Road Railway Station", distance: "8 km" },
                { name: "Gokarna Bus Stand", distance: "1 km" },
                { name: "Dabolim Airport (Goa)", distance: "150 km" }
            ]
        },
        {
            id: 4,
            name: "Karwar",
            weather: "cold",
            temperature: 24,
            humidity: 75,
            windSpeed: 18,
            rainfall: 2,
            description: "A scenic coastal town nestled between the Western Ghats and the Arabian Sea.",
            images: [
                "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800&q=80", // Beach
                "https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800&q=80", // Fort/Historical
                "https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=800&q=80"  // Coastal
            ],
            cardImage: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800&q=80",
            nearbyPlaces: [
                { name: "Rabindranath Tagore Beach", distance: "2 km" },
                { name: "Sadashivgad Fort", distance: "5 km" },
                { name: "Kurumgad Island", distance: "10 km" }
            ],
            stays: [
                { name: "The Great Outdoors", distance: "3 km", type: "Resort" },
                { name: "Coastal County", distance: "6 km", type: "Hotel" },
                { name: "Devbagh Beach Resort", distance: "8 km", type: "Beach Resort" }
            ],
            transportation: [
                { name: "Karwar Railway Station", distance: "3 km" },
                { name: "Karwar Bus Stand", distance: "1 km" },
                { name: "Dabolim Airport (Goa)", distance: "100 km" }
            ]
        },
        {
            id: 5,
            name: "Murudeshwar",
            weather: "sunny",
            temperature: 29,
            humidity: 68,
            windSpeed: 14,
            rainfall: 0,
            description: "Home to the world's second tallest Shiva statue and beautiful beaches.",
            images: [
                "https://images.unsplash.com/photo-1582510003544-4d00b7f74220?w=800&q=80", // Temple/Statue
                "images/mr1.jpeg", // Beach
                "images/mu5.jpg"  // Sunset
            ],
            cardImage: "images/mu5.jpg",
            nearbyPlaces: [
                { name: "Murudeshwar Temple", distance: "1 km" },
                { name: "Netrani Island", distance: "20 km" },
                { name: "Bhatkal Beach", distance: "15 km" }
            ],
            stays: [
                { name: "RNS Residency", distance: "1 km", type: "Hotel" },
                { name: "Naveen Beach Resort", distance: "2 km", type: "Resort" },
                { name: "Janardhana Lodge", distance: "1 km", type: "Lodge" }
            ],
            transportation: [
                { name: "Murudeshwar Railway Station", distance: "2 km" },
                { name: "Murudeshwar Bus Stand", distance: "1 km" },
                { name: "Mangalore Airport", distance: "160 km" }
            ]
        },
        {
            id: 6,
            name: "Malpe",
            weather: "alert",
            temperature: 27,
            humidity: 85,
            windSpeed: 25,
            rainfall: 8,
            description: "A natural port with beautiful beaches and access to St. Mary's Island.",
            images: [
                "images/ml1.jpeg", // Beach
                "images/ml2.jpeg", // Island
                "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800&q=80"  // Coastal
            ],
            cardImage: "images/ml2.jpeg",
            nearbyPlaces: [
                { name: "St. Mary's Island", distance: "10 km" },
                { name: "Malpe Beach", distance: "1 km" },
                { name: "Balarama Temple", distance: "5 km" }
            ],
            stays: [
                { name: "Malpe Beach Resort", distance: "1 km", type: "Resort" },
                { name: "Paradise Lagoon", distance: "3 km", type: "Hotel" },
                { name: "Island View Homestay", distance: "5 km", type: "Homestay" }
            ],
            transportation: [
                { name: "Udupi Railway Station", distance: "6 km" },
                { name: "Malpe Bus Stand", distance: "1 km" },
                { name: "Mangalore Airport", distance: "60 km" }
            ]
        }
    ];
    

    // ========== INITIALIZATION ==========
    
    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
        console.log("Tour Connect initialized");
        initializeApp();
        setupPasswordToggles();
        checkLoginStatus();
        loadCities();
        loadSampleBookings();
        loadSampleFeedbacks();
        

        
        // Load live weather data automatically (FREE API - No signup needed!)
        console.log(' Loading live weather from Open-Meteo API...');
        updateAllCitiesWeather();
        startWeatherAutoUpdate();
    });
    
    // Initialize demo data and check for existing session
    function initializeApp() {
        // Initialize users array in localStorage if it doesn't exist
        if (!localStorage.getItem('users')) {
            const demoUsers = [
                {
                    id: '1',
                    name: 'John Doe',
                    email: 'user@example.com',
                    password: 'password123',
                    isAdmin: false,
                    createdAt: new Date().toISOString()
                },
                {
                    id: '2',
                    name: 'Admin User',
                    email: 'admin@example.com',
                    password: 'admin123',
                    isAdmin: true,
                    createdAt: new Date().toISOString()
                }
            ];
            localStorage.setItem('users', JSON.stringify(demoUsers));
            console.log("Demo users created");
        }
    }
    
    // ========== AUTHENTICATION FUNCTIONS ==========
    
    // Set up password visibility toggles
    function setupPasswordToggles() {
        // Login password toggle
        const toggleLoginPassword = document.getElementById('toggleLoginPassword');
        if (toggleLoginPassword) {
            toggleLoginPassword.addEventListener('click', function() {
                togglePasswordVisibility('loginPassword', this);
            });
        }
        
        // Register password toggle
        const toggleRegisterPassword = document.getElementById('toggleRegisterPassword');
        if (toggleRegisterPassword) {
            toggleRegisterPassword.addEventListener('click', function() {
                togglePasswordVisibility('registerPassword', this);
            });
        }
        
        // Confirm password toggle
        const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
        if (toggleConfirmPassword) {
            toggleConfirmPassword.addEventListener('click', function() {
                togglePasswordVisibility('confirmPassword', this);
            });
        }
    }
    
    // Toggle password visibility
    function togglePasswordVisibility(passwordFieldId, iconElement) {
        const passwordField = document.getElementById(passwordFieldId);
        if (passwordField) {
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                iconElement.classList.remove('fa-eye');
                iconElement.classList.add('fa-eye-slash');
            } else {
                passwordField.type = 'password';
                iconElement.classList.remove('fa-eye-slash');
                iconElement.classList.add('fa-eye');
            }
        }
    }
    
    // Check login status
    function checkLoginStatus() {
        const savedUser = JSON.parse(localStorage.getItem('currentUser'));
        if (savedUser) {
            updateProfile(savedUser);
            showDashboard();
            console.log("User already logged in:", savedUser.name);
        }
    }
    
    // Switch between login and register tabs
    function switchAuthTab(tab) {
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('registerForm').style.display = 'none';
        document.getElementById('forgotPasswordForm').style.display = 'none';
        
        document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
        
        if (tab === 'login') {
            document.getElementById('loginForm').style.display = 'block';
            document.querySelectorAll('.auth-tab')[0].classList.add('active');
        } else if (tab === 'register') {
            document.getElementById('registerForm').style.display = 'block';
            document.querySelectorAll('.auth-tab')[1].classList.add('active');
        }
    }
    
    // Show forgot password form
    function showForgotPassword() {
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('registerForm').style.display = 'none';
        document.getElementById('forgotPasswordForm').style.display = 'block';
        
        document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
    }
    
    // Handle login form submission
    function handleLogin(event) {
        event.preventDefault();
        console.log("Login attempt");
        
        const username = document.getElementById('loginEmail').value.trim();
        const password = document.getElementById('loginPassword').value;
        const isAdmin = document.getElementById('isAdminLogin').checked;
        
        // Hide any previous error messages
        const errorEl = document.getElementById('loginError');
        if (errorEl) errorEl.style.display = 'none';
        
        // Validate inputs
        if (!username || !password) {
            if (errorEl) {
                errorEl.textContent = 'Please enter email and password';
                errorEl.style.display = 'block';
            }
            return;
        }
        
        // Prepare request body
        const requestBody = {
            username,
            password,
            isAdmin
        };
        
        // If admin login, add adminId (required by server)
        if (isAdmin) {
            requestBody.adminId = username; // Server checks both email and admin_id
        }
        
        console.log("Login request:", { ...requestBody, password: '***' });
        
        // Call server API
        fetch('http://localhost:3000/api/auth/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(requestBody)
        })
        .then(async res => {
            const data = await res.json().catch(() => ({}));
            console.log("Server response:", res.status, data);
            if (!res.ok) {
                throw new Error(data.message || 'Login failed');
            }
            return data;
        })
        .then(data => {
            console.log("Login successful:", data);
            
            // Save token and user to localStorage
            localStorage.setItem('authToken', data.token);
            localStorage.setItem('currentUser', JSON.stringify(data.user));
            
            // Update profile
            updateProfile(data.user);
            
            // Show success notification
            showNotification('Login successful!', 'success');
            
            // Show dashboard based on user type
            if (data.user.isAdmin) {
                showAdminDashboard();
            } else {
                showDashboard();
            }
        })
        .catch(err => {
            console.error('Login error:', err);
            if (errorEl) {
                errorEl.textContent = err.message || 'Invalid email or password. Please try again.';
                errorEl.style.display = 'block';
            }
        });
    }
    
    // Handle register form submission
    function handleRegister(event) {
        event.preventDefault();
    
        const name = document.getElementById('registerName')?.value?.trim();
        const email = document.getElementById('registerEmail')?.value?.trim();
        const password = document.getElementById('registerPassword')?.value || '';
        const confirmPassword = document.getElementById('confirmPassword')?.value || '';
    
        // Reset alerts
        showRegisterSuccess('');
        showRegisterError('');
        document.getElementById('registerSuccess').style.display = 'none';
        document.getElementById('registerError').style.display = 'none';
    
        // Basic validation
        if (!name || !email || !password || !confirmPassword) {
            showRegisterError('All fields are required.');
            return;
        }
        if (password !== confirmPassword) {
            showRegisterError('Passwords do not match.');
            return;
        }
        if (password.length < 8) {
            showRegisterError('Password must be at least 8 characters long.');
            return;
        }
    
        fetch('http://localhost:3000/api/auth/register', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, password, confirmPassword })
        })
        .then(async res => {
            const data = await res.json().catch(() => ({}));
            if (!res.ok) throw new Error(data.message || 'Registration failed');
            showRegisterSuccess('Account created successfully! You can now login.');
            document.getElementById('registerFormElement').reset();
            const bar = document.getElementById('passwordStrengthBar');
            if (bar) bar.style.width = '0';
            // Optionally switch to login after a short delay
            if (typeof switchAuthTab === 'function') {
                setTimeout(() => switchAuthTab('login'), 1200);
            }
        })
        .catch(err => {
            showRegisterError(err.message || 'Registration failed');
            console.error('Register error:', err);
        });
    }
    
    // Show register error
    function showRegisterError(message) {
        const el = document.getElementById('registerError');
        if (!el) return;
        if (message) {
            el.textContent = message;
            el.style.display = 'block';
        } else {
            el.textContent = '';
            el.style.display = 'none';
        }
    }
    
    // Show register success
    function showRegisterSuccess(message) {
        const el = document.getElementById('registerSuccess');
        if (!el) return;
        if (message) {
            el.textContent = message;
            el.style.display = 'block';
        } else {
            el.textContent = '';
            el.style.display = 'none';
        }
    }
    
    // Handle forgot password form submission
    function handleForgotPassword(event) {
        event.preventDefault();
        
        const email = document.getElementById('forgotPasswordEmail').value;
        
        // Hide any previous messages
        document.getElementById('forgotPasswordSuccess').style.display = 'none';
        document.getElementById('forgotPasswordError').style.display = 'none';
        
        // Get users from localStorage
        const users = JSON.parse(localStorage.getItem('users')) || [];
        
        // Check if user exists
        const user = users.find(u => u.email === email);
        
        if (user) {
            // In a real app, you would send an email here
            document.getElementById('forgotPasswordSuccess').textContent = 
                'Password reset instructions have been sent to your email.';
            document.getElementById('forgotPasswordSuccess').style.display = 'block';
            
            // Clear form
            document.getElementById('forgotPasswordEmail').value = '';
        } else {
            document.getElementById('forgotPasswordError').textContent = 
                'No account found with this email address.';
            document.getElementById('forgotPasswordError').style.display = 'block';
        }
    }
    
    // Check password strength
    function checkPasswordStrength() {
        const password = document.getElementById('registerPassword').value;
        const strengthBar = document.getElementById('passwordStrengthBar');
        
        let strength = 0;
        
        // Length check
        if (password.length >= 8) strength += 25;
        
        // Contains lowercase letter
        if (/[a-z]/.test(password)) strength += 25;
        
        // Contains uppercase letter
        if (/[A-Z]/.test(password)) strength += 25;
        
        // Contains number or special character
        if (/[0-9]/.test(password) || /[^A-Za-z0-9]/.test(password)) strength += 25;
        
        // Update strength bar
        strengthBar.style.width = strength + '%';
        
        // Change color based on strength
        if (strength < 50) {
            strengthBar.style.background = '#dc3545'; // Red
        } else if (strength < 75) {
            strengthBar.style.background = '#ffc107'; // Yellow
        } else {
            strengthBar.style.background = '#28a745'; // Green
        }
    }
    
    // Update profile information
    function updateProfile(user) {
        if (user) {
            document.getElementById('profileName').textContent = user.name;
            document.getElementById('profileEmail').textContent = user.email;
            document.getElementById('profileAvatar').textContent = user.name.charAt(0).toUpperCase();
            
            // Show dashboard and logout buttons
            document.getElementById('dashboardBtn').style.display = 'block';
            document.getElementById('logoutBtn').style.display = 'block';
            
            // Set global variables
            currentUser = user;
            isAdmin = user.isAdmin;
            
            console.log("Profile updated for:", user.name);
        }
    }
    
    // Show dashboard
    function showDashboard() {
        showSection('dashboard');
        
        if (isAdmin) {
            document.getElementById('dashboardTitle').textContent = 'Admin Dashboard';
            document.getElementById('userDashboard').style.display = 'none';
            document.getElementById('adminDashboard').style.display = 'grid';
        } else {
            document.getElementById('dashboardTitle').textContent = 'User Dashboard';
            document.getElementById('userDashboard').style.display = 'grid';
            document.getElementById('adminDashboard').style.display = 'none';
        }
        
        // Load user-specific data
        loadSampleBookings();
        loadFeedbackList();
    }

    // Show admin dashboard specifically
    function showAdminDashboard() {
        showSection('dashboard');
        document.getElementById('dashboardTitle').textContent = 'Admin Dashboard';
        document.getElementById('userDashboard').style.display = 'none';
        document.getElementById('adminDashboard').style.display = 'grid';
        
        // Load admin-specific data
        loadSampleBookings();
        loadFeedbackList();
    }
    
    // Logout
    function logout() {
        localStorage.removeItem('currentUser');
        currentUser = null;
        isAdmin = false;
        bookings = [];
        
        // Reset profile
        document.getElementById('profileName').textContent = 'Guest User';
        document.getElementById('profileEmail').textContent = 'Not logged in';
        document.getElementById('profileAvatar').textContent = 'G';
        
        // Hide dashboard and logout buttons
        document.getElementById('dashboardBtn').style.display = 'none';
        document.getElementById('logoutBtn').style.display = 'none';
        
        // Close profile menu
        document.getElementById('profileMenu').classList.remove('show');
        
        // Show home section
        showSection('home');
        
        // Show notification
        showNotification('You have been logged out.', 'success');
        
        console.log("User logged out");
    }

    // ========== APPLICATION FUNCTIONS ==========

    // Load sample bookings
    function loadSampleBookings() {
        if (currentUser && !isAdmin) {
            bookings = [
                {
                    id: bookingIdCounter++,
                    name: currentUser.name,
                    email: currentUser.email,
                    phone: "9876543210",
                    members: 2,
                    destination: "Gokarna",
                    arrival: "2023-12-15T10:00",
                    status: "confirmed"
                },
                {
                    id: bookingIdCounter++,
                    name: currentUser.name,
                    email: currentUser.email,
                    phone: "9876543210",
                    members: 4,
                    destination: "Mangalore",
                    arrival: "2023-12-20T14:00",
                    status: "pending"
                }
            ];
            console.log("Sample bookings loaded for user");
        }
    }

    // Load sample feedbacks
    function loadSampleFeedbacks() {
        feedbacks = [
            {
                id: feedbackIdCounter++,
                name: "SANNAT",
                destination: "Gokarna",
                rating: 5,
                message: "Amazing experience at Gokarna! The beach was pristine and the weather was perfect. Highly recommend visiting during the early morning for the best experience.",
                date: "2023-11-15"
            },
            {
                id: feedbackIdCounter++,
                name: "SHASHANK",
                destination: "Murudeshwar",
                rating: 4,
                message: "Murudeshwar temple is breathtaking! The weather updates were very helpful for planning. Would have given 5 stars if the crowd management was better.",
                date: "2023-11-10"
            },
            {
                id: feedbackIdCounter++,
                name: "PREETAN",
                destination: "Udupi",
                rating: 5,
                message: "Udupi's Krishna temple is divine! The local cuisine is exceptional. The booking system made everything so convenient.",
                date: "2023-11-08"
            }
        ];
        loadFeedbackList();
    }

    // Fetch live weather data using Open-Meteo API (FREE - NO API KEY NEEDED!)
    async function fetchWeatherData(cityName) {
        const coords = cityCoordinates[cityName];
        if (!coords) {
            console.error(`No coordinates found for ${cityName}`);
            return null;
        }

        try {
            // Enhanced API call with more detailed weather parameters
            const url = `${WEATHER_API_URL}?latitude=${coords.lat}&longitude=${coords.lon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,weather_code,wind_speed_10m,wind_direction_10m,pressure_msl,cloud_cover,visibility,is_day&daily=temperature_2m_max,temperature_2m_min,sunrise,sunset,uv_index_max,precipitation_sum,precipitation_probability_max&timezone=Asia/Kolkata&forecast_days=3`;
            
            const response = await fetch(url);
            
            if (!response.ok) {
                console.error(`Weather API error for ${cityName}:`, response.status);
                return null;
            }

            const data = await response.json();
            const current = data.current;
            const daily = data.daily;
            
            // Map weather codes to conditions and descriptions
            // Always show "sunny" on cards (as requested)
            const weatherCode = current.weather_code;
            let weatherCondition = 'sunny'; // Always sunny for card display
            let weatherDescription = 'Clear sky';
            
            // Set detailed description for modal (but card will always show sunny)
            if (weatherCode === 0) {
                weatherDescription = 'Clear sky';
            } else if (weatherCode >= 1 && weatherCode <= 3) {
                weatherDescription = weatherCode === 1 ? 'Mainly clear' : weatherCode === 2 ? 'Partly cloudy' : 'Overcast';
            } else if (weatherCode >= 45 && weatherCode <= 48) {
                weatherDescription = 'Foggy';
            } else if (weatherCode >= 51 && weatherCode <= 57) {
                weatherDescription = 'Drizzle';
            } else if (weatherCode >= 61 && weatherCode <= 67) {
                weatherDescription = weatherCode <= 63 ? 'Light rain' : 'Heavy rain';
            } else if (weatherCode >= 71 && weatherCode <= 77) {
                weatherDescription = 'Snow';
            } else if (weatherCode >= 80 && weatherCode <= 99) {
                weatherDescription = weatherCode >= 95 ? 'Thunderstorm' : 'Rain showers';
            }
            
            // Get wind direction
            const windDir = getWindDirection(current.wind_direction_10m);
            
            // Calculate feels like difference
            const feelsLikeDiff = Math.round(current.apparent_temperature - current.temperature_2m);
            
            console.log(` Live weather for ${cityName}: ${Math.round(current.temperature_2m)}C, ${weatherDescription}`);
            
            return {
                // Current conditions
                temperature: Math.round(current.temperature_2m),
                feelsLike: Math.round(current.apparent_temperature),
                humidity: current.relative_humidity_2m,
                windSpeed: Math.round(current.wind_speed_10m),
                windDirection: windDir,
                windDegree: current.wind_direction_10m,
                rainfall: current.precipitation || 0,
                weather: weatherCondition,
                weatherDescription: weatherDescription,
                weatherCode: weatherCode,
                pressure: Math.round(current.pressure_msl),
                cloudCover: current.cloud_cover,
                visibility: (current.visibility / 1000).toFixed(1), // Convert to km
                isDay: current.is_day === 1,
                
                // Daily forecast
                maxTemp: Math.round(daily.temperature_2m_max[0]),
                minTemp: Math.round(daily.temperature_2m_min[0]),
                sunrise: new Date(daily.sunrise[0]).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true }),
                sunset: new Date(daily.sunset[0]).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true }),
                uvIndex: daily.uv_index_max[0],
                precipitationChance: daily.precipitation_probability_max[0] || 0,
                
                // 3-day forecast
                forecast: [
                    {
                        day: 'Today',
                        maxTemp: Math.round(daily.temperature_2m_max[0]),
                        minTemp: Math.round(daily.temperature_2m_min[0]),
                        precipitation: daily.precipitation_sum[0]
                    },
                    {
                        day: 'Tomorrow',
                        maxTemp: Math.round(daily.temperature_2m_max[1]),
                        minTemp: Math.round(daily.temperature_2m_min[1]),
                        precipitation: daily.precipitation_sum[1]
                    },
                    {
                        day: getDayName(2),
                        maxTemp: Math.round(daily.temperature_2m_max[2]),
                        minTemp: Math.round(daily.temperature_2m_min[2]),
                        precipitation: daily.precipitation_sum[2]
                    }
                ]
            };
        } catch (error) {
            console.error(`Error fetching weather for ${cityName}:`, error.message);
            return null;
        }
    }

    // Helper function to get wind direction
    function getWindDirection(degree) {
        const directions = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW'];
        const index = Math.round(degree / 22.5) % 16;
        return directions[index];
    }

    // Helper function to get day name
    function getDayName(daysFromNow) {
        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        const date = new Date();
        date.setDate(date.getDate() + daysFromNow);
        return days[date.getDay()];
    }

    // Update city weather data
    async function updateCityWeather(city) {
        const weatherData = await fetchWeatherData(city.name);
        
        if (weatherData) {
            // Store all detailed weather data
            city.temperature = weatherData.temperature;
            city.feelsLike = weatherData.feelsLike;
            city.humidity = weatherData.humidity;
            city.windSpeed = weatherData.windSpeed;
            city.windDirection = weatherData.windDirection;
            city.windDegree = weatherData.windDegree;
            city.rainfall = weatherData.rainfall;
            city.weather = weatherData.weather;
            city.weatherDescription = weatherData.weatherDescription;
            city.weatherCode = weatherData.weatherCode;
            city.pressure = weatherData.pressure;
            city.cloudCover = weatherData.cloudCover;
            city.visibility = weatherData.visibility;
            city.isDay = weatherData.isDay;
            city.maxTemp = weatherData.maxTemp;
            city.minTemp = weatherData.minTemp;
            city.sunrise = weatherData.sunrise;
            city.sunset = weatherData.sunset;
            city.uvIndex = weatherData.uvIndex;
            city.precipitationChance = weatherData.precipitationChance;
            city.forecast = weatherData.forecast;
        }
    }

    // Update all cities weather data
    async function updateAllCitiesWeather() {
        console.log(' Fetching live weather data (FREE API - No key needed!)...');
        const weatherPromises = cities.map(city => updateCityWeather(city));
        await Promise.all(weatherPromises);
        loadCities();
        updateWeatherTimestamp();
    }

    // Update weather timestamp
    function updateWeatherTimestamp() {
        const timeElement = document.getElementById('weatherUpdateTime');
        if (timeElement) {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
            const dateString = now.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric' 
            });
            timeElement.innerHTML = `<i class="fas fa-check-circle me-1 text-success"></i>Live weather updated: ${dateString} at ${timeString}`;
        }
    }

    // Refresh weather data with loading state
    async function refreshWeatherData() {
        const refreshBtn = document.getElementById('refreshWeatherBtn');
        
        if (refreshBtn) {
            refreshBtn.disabled = true;
            refreshBtn.innerHTML = '<i class="fas fa-sync-alt fa-spin me-2"></i>Updating...';
        }

        try {
            await updateAllCitiesWeather();
            showNotification('Live weather updated successfully! ', 'success');
        } catch (error) {
            console.error('Error refreshing weather:', error);
            showNotification('Failed to update weather data', 'error');
        } finally {
            if (refreshBtn) {
                refreshBtn.disabled = false;
                refreshBtn.innerHTML = '<i class="fas fa-sync-alt me-2"></i>Refresh Weather';
            }
        }
    }

    // Auto-refresh weather every 10 minutes
    let weatherUpdateInterval = null;
    
    function startWeatherAutoUpdate() {
        if (weatherUpdateInterval) {
            clearInterval(weatherUpdateInterval);
        }
        
        weatherUpdateInterval = setInterval(() => {
            updateAllCitiesWeather();
            console.log(' Weather data auto-updated');
        }, 600000); // 10 minutes
    }

    function stopWeatherAutoUpdate() {
        if (weatherUpdateInterval) {
            clearInterval(weatherUpdateInterval);
            weatherUpdateInterval = null;
        }
    }

    // Fetch nearby tourist places using OpenWeatherMap API
    async function fetchNearbyPlaces(lat, lon, cityName) {
        try {
            const API_KEY = 'f681dc2635bca144cbc3c8e39a45971c';
            
            // Try to fetch nearby places using OpenWeatherMap's find API
            const response = await fetch(
                `https://api.openweathermap.org/data/2.5/find?lat=${lat}&lon=${lon}&cnt=10&appid=${API_KEY}`
            );
            
            if (response.ok) {
                const data = await response.json();
                const places = [];
                
                // Analyze nearby cities to determine tourist attractions
                if (data.list && data.list.length > 0) {
                    const nearbyNames = data.list.map(item => item.name).slice(0, 5);
                    
                    places.push({
                        icon: 'landmark',
                        name: nearbyNames[0] || 'Historical Sites',
                        description: `Visit ${nearbyNames[0] || 'ancient temples & monuments'}`
                    });
                    
                    places.push({
                        icon: 'water',
                        name: nearbyNames[1] || 'Beaches',
                        description: `Explore ${nearbyNames[1] || 'coastal attractions'}`
                    });
                    
                    places.push({
                        icon: 'mountain',
                        name: nearbyNames[2] || 'Nature Parks',
                        description: `Discover ${nearbyNames[2] || 'scenic viewpoints'}`
                    });
                    
                    places.push({
                        icon: 'utensils',
                        name: 'Local Cuisine',
                        description: `Try authentic ${cityName} food`
                    });
                }
                
                return places.length > 0 ? places : getDefaultTouristPlaces(cityName);
            }
        } catch (error) {
            console.log('Using default tourist places:', error);
        }
        
        return getDefaultTouristPlaces(cityName);
    }

    // Get default tourist places based on city name
    function getDefaultTouristPlaces(cityName) {
        const lowerCity = cityName.toLowerCase();
        
        // Coastal Karnataka cities
        if (lowerCity.includes('mangalore') || lowerCity.includes('mangaluru')) {
            return [
                { icon: 'water', name: 'Panambur Beach', description: 'Popular beach destination' },
                { icon: 'landmark', name: 'Kadri Temple', description: 'Ancient Manjunatha temple' },
                { icon: 'church', name: 'St. Aloysius Chapel', description: 'Historic church with paintings' },
                { icon: 'utensils', name: 'Coastal Cuisine', description: 'Fresh seafood & Mangalorean dishes' }
            ];
        } else if (lowerCity.includes('udupi')) {
            return [
                { icon: 'landmark', name: 'Krishna Temple', description: 'Famous pilgrimage site' },
                { icon: 'water', name: 'Malpe Beach', description: 'Scenic beach with water sports' },
                { icon: 'island', name: 'St. Mary\'s Island', description: 'Unique hexagonal rock formations' },
                { icon: 'utensils', name: 'Udupi Cuisine', description: 'Authentic vegetarian food' }
            ];
        } else if (lowerCity.includes('karwar')) {
            return [
                { icon: 'water', name: 'Karwar Beach', description: 'Pristine coastal beauty' },
                { icon: 'island', name: 'Devbagh Beach', description: 'Island beach resort' },
                { icon: 'ship', name: 'Sadashivgad Fort', description: 'Historic hilltop fort' },
                { icon: 'utensils', name: 'Seafood Delights', description: 'Fresh coastal cuisine' }
            ];
        } else if (lowerCity.includes('gokarna')) {
            return [
                { icon: 'water', name: 'Om Beach', description: 'Famous Om-shaped beach' },
                { icon: 'landmark', name: 'Mahabaleshwar Temple', description: 'Ancient Shiva temple' },
                { icon: 'water', name: 'Kudle Beach', description: 'Peaceful beach paradise' },
                { icon: 'hiking', name: 'Beach Trekking', description: 'Scenic coastal trails' }
            ];
        } else if (lowerCity.includes('mumbai')) {
            return [
                { icon: 'landmark', name: 'Gateway of India', description: 'Iconic monument' },
                { icon: 'water', name: 'Marine Drive', description: 'Scenic waterfront promenade' },
                { icon: 'film', name: 'Bollywood Studios', description: 'Film city tours' },
                { icon: 'utensils', name: 'Street Food', description: 'Famous vada pav & pav bhaji' }
            ];
        } else if (lowerCity.includes('delhi')) {
            return [
                { icon: 'landmark', name: 'Red Fort', description: 'Historic Mughal fortress' },
                { icon: 'monument', name: 'India Gate', description: 'War memorial monument' },
                { icon: 'place-of-worship', name: 'Lotus Temple', description: 'Bah House of Worship' },
                { icon: 'utensils', name: 'Street Food', description: 'Chaat, parathas & kebabs' }
            ];
        } else if (lowerCity.includes('bangalore') || lowerCity.includes('bengaluru')) {
            return [
                { icon: 'tree', name: 'Lalbagh Garden', description: 'Botanical garden paradise' },
                { icon: 'landmark', name: 'Bangalore Palace', description: 'Tudor-style palace' },
                { icon: 'building', name: 'Vidhana Soudha', description: 'Legislative building' },
                { icon: 'utensils', name: 'Diverse Cuisine', description: 'South Indian & global food' }
            ];
        } else if (lowerCity.includes('goa')) {
            return [
                { icon: 'water', name: 'Beaches', description: 'Baga, Calangute & Anjuna' },
                { icon: 'church', name: 'Churches', description: 'Portuguese heritage sites' },
                { icon: 'fort', name: 'Forts', description: 'Aguada & Chapora forts' },
                { icon: 'utensils', name: 'Goan Cuisine', description: 'Seafood & Portuguese fusion' }
            ];
        } else {
            // Generic tourist places for other cities
            return [
                { icon: 'landmark', name: 'Historical Sites', description: `Explore ${cityName}'s heritage` },
                { icon: 'mountain', name: 'Nature Spots', description: 'Parks and scenic views' },
                { icon: 'shopping-bag', name: 'Shopping Areas', description: 'Local markets & malls' },
                { icon: 'utensils', name: 'Local Cuisine', description: `Try authentic ${cityName} food` }
            ];
        }
    }

    // Get transportation info based on city
    function getTransportationInfo(cityName, country) {
        const lowerCity = cityName.toLowerCase();
        const transport = [];
        
        // Major cities with airports
        const airportCities = ['mumbai', 'delhi', 'bangalore', 'bengaluru', 'chennai', 'kolkata', 
                               'hyderabad', 'pune', 'goa', 'kochi', 'mangalore', 'mangaluru', 'ahmedabad',
                               'jaipur', 'lucknow', 'chandigarh', 'thiruvananthapuram', 'coimbatore'];
        
        if (airportCities.some(city => lowerCity.includes(city))) {
            transport.push({ icon: 'plane', name: 'Airport', status: 'International/Domestic', color: '#4A90E2' });
        } else {
            transport.push({ icon: 'plane', name: 'Airport', status: 'Nearest: 50-100 km', color: '#4A90E2' });
        }
        
        // Railway connectivity
        if (country === 'IN') {
            transport.push({ icon: 'train', name: 'Railway Station', status: 'Well Connected', color: '#E94B3C' });
        } else if (country === 'US' || country === 'GB' || country === 'FR' || country === 'DE' || country === 'JP') {
            transport.push({ icon: 'train', name: 'Railway/Metro', status: 'Available', color: '#E94B3C' });
        } else {
            transport.push({ icon: 'train', name: 'Railway', status: 'Check Availability', color: '#E94B3C' });
        }
        
        // Metro/Subway (for major cities)
        const metroCities = ['mumbai', 'delhi', 'bangalore', 'bengaluru', 'chennai', 'kolkata', 
                            'hyderabad', 'pune', 'kochi', 'jaipur', 'lucknow', 'nagpur', 'ahmedabad'];
        
        if (metroCities.some(city => lowerCity.includes(city))) {
            transport.push({ icon: 'subway', name: 'Metro/Subway', status: 'Operational', color: '#9B59B6' });
        }
        
        // Bus service (universal)
        transport.push({ icon: 'bus-alt', name: 'City Bus', status: 'Regular Service', color: '#F39C12' });
        
        // Auto Rickshaw (for Indian cities)
        if (country === 'IN') {
            transport.push({ icon: 'motorcycle', name: 'Auto Rickshaw', status: 'Widely Available', color: '#16A085' });
        }
        
        // Taxi/Cab services
        const cabCities = ['mumbai', 'delhi', 'bangalore', 'bengaluru', 'chennai', 'hyderabad', 
                          'pune', 'kolkata', 'ahmedabad', 'jaipur', 'chandigarh', 'goa', 'mangalore', 'mangaluru'];
        
        if (cabCities.some(city => lowerCity.includes(city))) {
            transport.push({ icon: 'taxi', name: 'Taxi/Uber/Ola', status: 'App-based & Local', color: '#2ECC71' });
        } else {
            transport.push({ icon: 'taxi', name: 'Taxi Service', status: '24/7 Available', color: '#2ECC71' });
        }
        
        // Bike/Scooter Rental
        const bikeRentalCities = ['goa', 'bangalore', 'bengaluru', 'pune', 'mumbai', 'delhi', 
                                 'jaipur', 'udaipur', 'gokarna', 'hampi', 'pondicherry'];
        
        if (bikeRentalCities.some(city => lowerCity.includes(city))) {
            transport.push({ icon: 'bicycle', name: 'Bike/Scooter Rental', status: 'Popular Option', color: '#E67E22' });
        }
        
        // Car rental
        const rentalCities = ['mumbai', 'delhi', 'bangalore', 'bengaluru', 'chennai', 'hyderabad', 
                             'pune', 'goa', 'mangalore', 'mangaluru', 'udupi', 'jaipur', 'ahmedabad',
                             'kochi', 'coimbatore', 'mysore', 'mysuru'];
        
        if (rentalCities.some(city => lowerCity.includes(city))) {
            transport.push({ icon: 'car', name: 'Car Rental', status: 'Multiple Agencies', color: '#3498DB' });
        } else {
            transport.push({ icon: 'car', name: 'Car Rental', status: 'Limited Options', color: '#3498DB' });
        }
        
        // Ferry/Boat (for coastal/river cities)
        const waterTransportCities = ['mumbai', 'goa', 'kochi', 'kolkata', 'varanasi', 'allahabad', 
                                     'prayagraj', 'srinagar', 'alappuzha', 'kumarakom'];
        
        if (waterTransportCities.some(city => lowerCity.includes(city))) {
            transport.push({ icon: 'ship', name: 'Ferry/Boat', status: 'Available', color: '#1ABC9C' });
        }
        
        // Cycle Rickshaw (for smaller Indian cities)
        const cycleRickshawCities = ['varanasi', 'agra', 'jaipur', 'lucknow', 'patna', 'chandigarh', 
                                    'amritsar', 'ludhiana', 'dehradun'];
        
        if (cycleRickshawCities.some(city => lowerCity.includes(city))) {
            transport.push({ icon: 'person-biking', name: 'Cycle Rickshaw', status: 'Traditional Transport', color: '#95A5A6' });
        }
        
        // Parking facilities (for major cities)
        if (airportCities.some(city => lowerCity.includes(city))) {
            transport.push({ icon: 'parking', name: 'Parking', status: 'Available at Major Spots', color: '#34495E' });
        }
        
        return transport;
    }

    // Search weather by location using OpenWeatherMap API
    async function searchLocationWeather() {
        const locationInput = document.getElementById('locationSearch');
        const resultDiv = document.getElementById('searchWeatherResult');
        const location = locationInput.value.trim();

        if (!location) {
            alert('Please enter a location name');
            return;
        }

        // Show loading
        resultDiv.className = 'search-result show';
        resultDiv.innerHTML = '<div class="text-center"><i class="fas fa-spinner fa-spin fa-2x"></i><p class="mt-2">Searching weather...</p></div>';

        try {
            // OpenWeatherMap API key (you need to replace with your own key)
            const API_KEY = 'f681dc2635bca144cbc3c8e39a45971c'; // Replace this!
            const API_URL = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(location)}&appid=${API_KEY}&units=metric`;

            const response = await fetch(API_URL);
            
            if (!response.ok) {
                if (response.status === 404) {
                    throw new Error('Location not found. Please check the spelling and try again.');
                } else if (response.status === 401) {
                    throw new Error('API key not configured. Please add your OpenWeatherMap API key.');
                } else {
                    throw new Error('Failed to fetch weather data. Please try again.');
                }
            }

            const data = await response.json();

            // Display weather result
            const weatherIcon = getWeatherIcon(data.weather[0].main);
            const sunrise = new Date(data.sys.sunrise * 1000).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });
            const sunset = new Date(data.sys.sunset * 1000).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });

            // Calculate rain chance based on weather conditions
            const rainChance = data.weather[0].main === 'Rain' ? 80 : 
                              data.weather[0].main === 'Drizzle' ? 60 :
                              data.weather[0].main === 'Clouds' ? 30 : 10;

            // Fetch nearby places using coordinates
            const lat = data.coord.lat;
            const lon = data.coord.lon;
            const nearbyPlaces = await fetchNearbyPlaces(lat, lon, data.name);
            const transportInfo = getTransportationInfo(data.name, data.sys.country);

            resultDiv.innerHTML = `
                <div class="weather-result-card">
                    <div class="weather-result-header">
                        <div>
                            <h3>${data.name}, ${data.sys.country}</h3>
                            <p style="margin: 0; font-size: 1.2rem; opacity: 0.9;">${data.weather[0].description}</p>
                        </div>
                        <div class="weather-icon-large">
                            <i class="fas fa-${weatherIcon}"></i>
                        </div>
                    </div>
                    
                    <div style="font-size: 3rem; font-weight: bold; margin: 20px 0;">
                        ${Math.round(data.main.temp)}C
                        <span style="font-size: 1.2rem; opacity: 0.8;">Feels like ${Math.round(data.main.feels_like)}C</span>
                    </div>

                    <div class="weather-details-grid">
                        <div class="weather-detail-item">
                            <i class="fas fa-tint"></i>
                            <div class="value">${data.main.humidity}%</div>
                            <div class="label">Humidity</div>
                        </div>
                        <div class="weather-detail-item">
                            <i class="fas fa-wind"></i>
                            <div class="value">${Math.round(data.wind.speed * 3.6)} km/h</div>
                            <div class="label">Wind Speed</div>
                        </div>
                        <div class="weather-detail-item">
                            <i class="fas fa-cloud-rain"></i>
                            <div class="value">${rainChance}%</div>
                            <div class="label">Rain Chance</div>
                        </div>
                        <div class="weather-detail-item">
                            <i class="fas fa-compress-arrows-alt"></i>
                            <div class="value">${data.main.pressure} hPa</div>
                            <div class="label">Pressure</div>
                        </div>
                        <div class="weather-detail-item">
                            <i class="fas fa-eye"></i>
                            <div class="value">${(data.visibility / 1000).toFixed(1)} km</div>
                            <div class="label">Visibility</div>
                        </div>
                        <div class="weather-detail-item">
                            <i class="fas fa-sunrise"></i>
                            <div class="value">${sunrise}</div>
                            <div class="label">Sunrise</div>
                        </div>
                        <div class="weather-detail-item">
                            <i class="fas fa-sunset"></i>
                            <div class="value">${sunset}</div>
                            <div class="label">Sunset</div>
                        </div>
                    </div>

                    <!-- 3-Day Forecast -->
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.3);">
                        <h4 style="margin-bottom: 15px;"><i class="fas fa-calendar-alt me-2"></i>3-Day Forecast</h4>
                        <div class="forecast-container">
                            <div class="forecast-card" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">
                                <div class="day">Today</div>
                                <i class="fas fa-${weatherIcon}" style="font-size: 2rem; margin: 10px 0;"></i>
                                <div class="temps">
                                    <span class="max-temp" style="color: #ffeb3b;">${Math.round(data.main.temp_max)}</span> / 
                                    <span class="min-temp" style="color: #b3e5fc;">${Math.round(data.main.temp_min)}</span>
                                </div>
                                <div style="font-size: 0.85rem; opacity: 0.9; margin-top: 5px;">${data.weather[0].main}</div>
                            </div>
                            <div class="forecast-card" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">
                                <div class="day">Tomorrow</div>
                                <i class="fas fa-cloud-sun" style="font-size: 2rem; margin: 10px 0;"></i>
                                <div class="temps">
                                    <span class="max-temp" style="color: #ffeb3b;">${Math.round(data.main.temp_max + 2)}</span> / 
                                    <span class="min-temp" style="color: #b3e5fc;">${Math.round(data.main.temp_min + 1)}</span>
                                </div>
                                <div style="font-size: 0.85rem; opacity: 0.9; margin-top: 5px;">Partly Cloudy</div>
                            </div>
                            <div class="forecast-card" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">
                                <div class="day">Day 3</div>
                                <i class="fas fa-sun" style="font-size: 2rem; margin: 10px 0;"></i>
                                <div class="temps">
                                    <span class="max-temp" style="color: #ffeb3b;">${Math.round(data.main.temp_max + 1)}</span> / 
                                    <span class="min-temp" style="color: #b3e5fc;">${Math.round(data.main.temp_min)}</span>
                                </div>
                                <div style="font-size: 0.85rem; opacity: 0.9; margin-top: 5px;">Clear Sky</div>
                            </div>
                        </div>
                    </div>

                    <!-- Nearby Tourist Places -->
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.3);">
                        <h4 style="margin-bottom: 15px;"><i class="fas fa-map-marked-alt me-2"></i>Nearby Tourist Places</h4>
                        <div id="touristPlacesContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            ${nearbyPlaces.map(place => `
                                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px;">
                                    <i class="fas fa-${place.icon}" style="font-size: 1.5rem; margin-bottom: 8px;"></i>
                                    <div style="font-weight: bold;">${place.name}</div>
                                    <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">${place.description}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Transportation -->
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.3);">
                        <h4 style="margin-bottom: 15px;">
                            <i class="fas fa-route me-2"></i>Transportation Options
                            <span style="font-size: 0.8rem; opacity: 0.8; font-weight: normal; margin-left: 10px;">
                                (${transportInfo.length} modes available)
                            </span>
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px;">
                            ${transportInfo.map(transport => `
                                <div style="background: rgba(255,255,255,0.2); padding: 15px 12px; border-radius: 10px; text-align: center; 
                                            border-left: 4px solid ${transport.color || '#fff'}; transition: all 0.3s ease;
                                            box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                    <i class="fas fa-${transport.icon}" style="font-size: 2rem; margin-bottom: 8px; color: ${transport.color || '#fff'};"></i>
                                    <div style="font-weight: bold; font-size: 0.95rem; margin-bottom: 4px;">${transport.name}</div>
                                    <div style="font-size: 0.8rem; opacity: 0.9; line-height: 1.3;">${transport.status}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div style="margin-top: 15px; padding: 12px; background: rgba(255,255,255,0.15); border-radius: 8px; text-align: center;">
                            <i class="fas fa-info-circle me-2"></i>
                            <span style="font-size: 0.9rem;">Book transportation in advance for better rates and availability</span>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.3); text-align: center; opacity: 0.8;">
                        <small>Last updated: ${new Date().toLocaleString()}</small>
                    </div>
                </div>
            `;

            console.log('Weather data fetched successfully for:', location);

        } catch (error) {
            console.error('Weather search error:', error);
            resultDiv.innerHTML = `
                <div class="alert alert-danger">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Error:</strong> ${error.message}
                </div>
            `;
        }
    }

    // Get weather icon based on condition
    function getWeatherIcon(condition) {
        const icons = {
            'Clear': 'sun',
            'Clouds': 'cloud',
            'Rain': 'cloud-rain',
            'Drizzle': 'cloud-rain',
            'Thunderstorm': 'bolt',
            'Snow': 'snowflake',
            'Mist': 'smog',
            'Fog': 'smog',
            'Haze': 'smog'
        };
        return icons[condition] || 'cloud';
    }

    // Popular cities for autocomplete suggestions
    const popularCities = [
        // India - Major Cities
        { name: 'Mumbai', country: 'India', icon: 'city' },
        { name: 'Delhi', country: 'India', icon: 'city' },
        { name: 'Bangalore', country: 'India', icon: 'city' },
        { name: 'Bengaluru', country: 'India', icon: 'city' },
        { name: 'Hyderabad', country: 'India', icon: 'city' },
        { name: 'Chennai', country: 'India', icon: 'city' },
        { name: 'Kolkata', country: 'India', icon: 'city' },
        { name: 'Pune', country: 'India', icon: 'city' },
        { name: 'Ahmedabad', country: 'India', icon: 'city' },
        { name: 'Jaipur', country: 'India', icon: 'city' },
        
        // Coastal Karnataka
        { name: 'Mangalore', country: 'India', icon: 'water' },
        { name: 'Mangaluru', country: 'India', icon: 'water' },
        { name: 'Udupi', country: 'India', icon: 'water' },
        { name: 'Karwar', country: 'India', icon: 'water' },
        { name: 'Gokarna', country: 'India', icon: 'water' },
        { name: 'Manipal', country: 'India', icon: 'building' },
        
        // Tourist Destinations
        { name: 'Goa', country: 'India', icon: 'umbrella-beach' },
        { name: 'Mysore', country: 'India', icon: 'landmark' },
        { name: 'Mysuru', country: 'India', icon: 'landmark' },
        { name: 'Coorg', country: 'India', icon: 'mountain' },
        { name: 'Ooty', country: 'India', icon: 'mountain' },
        { name: 'Shimla', country: 'India', icon: 'mountain' },
        { name: 'Manali', country: 'India', icon: 'mountain' },
        { name: 'Darjeeling', country: 'India', icon: 'mountain' },
        { name: 'Agra', country: 'India', icon: 'landmark' },
        { name: 'Varanasi', country: 'India', icon: 'landmark' },
        { name: 'Kochi', country: 'India', icon: 'water' },
        { name: 'Thiruvananthapuram', country: 'India', icon: 'city' },
        
        // International Cities
        { name: 'New York', country: 'USA', icon: 'city' },
        { name: 'London', country: 'UK', icon: 'city' },
        { name: 'Paris', country: 'France', icon: 'city' },
        { name: 'Tokyo', country: 'Japan', icon: 'city' },
        { name: 'Dubai', country: 'UAE', icon: 'city' },
        { name: 'Singapore', country: 'Singapore', icon: 'city' },
        { name: 'Bangkok', country: 'Thailand', icon: 'city' },
        { name: 'Sydney', country: 'Australia', icon: 'city' },
        { name: 'Los Angeles', country: 'USA', icon: 'city' },
        { name: 'Toronto', country: 'Canada', icon: 'city' }
    ];

    // Autocomplete functionality
    let selectedIndex = -1;
    let filteredCities = [];

    function initAutocomplete() {
        const searchInput = document.getElementById('locationSearch');
        const dropdown = document.getElementById('autocompleteDropdown');
        
        if (!searchInput || !dropdown) return;

        // Input event for filtering
        searchInput.addEventListener('input', function(e) {
            const value = e.target.value.trim().toLowerCase();
            
            if (value.length < 2) {
                dropdown.classList.remove('show');
                return;
            }

            // Filter cities
            filteredCities = popularCities.filter(city => 
                city.name.toLowerCase().includes(value) || 
                city.country.toLowerCase().includes(value)
            );

            if (filteredCities.length === 0) {
                dropdown.classList.remove('show');
                return;
            }

            // Display suggestions
            dropdown.innerHTML = filteredCities.map((city, index) => `
                <div class="autocomplete-item" data-index="${index}" onclick="selectCity('${city.name}')">
                    <i class="fas fa-${city.icon}"></i>
                    <span class="city-name">${city.name}</span>
                    <span class="city-country">${city.country}</span>
                </div>
            `).join('');

            dropdown.classList.add('show');
            selectedIndex = -1;
        });

        // Keyboard navigation
        searchInput.addEventListener('keydown', function(e) {
            const items = dropdown.querySelectorAll('.autocomplete-item');
            
            if (e.key === 'ArrowDown') {
                e.preventDefault();
                selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
                updateSelection(items);
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                selectedIndex = Math.max(selectedIndex - 1, -1);
                updateSelection(items);
            } else if (e.key === 'Enter') {
                e.preventDefault();
                if (selectedIndex >= 0 && filteredCities[selectedIndex]) {
                    selectCity(filteredCities[selectedIndex].name);
                } else {
                    searchLocationWeather();
                }
            } else if (e.key === 'Escape') {
                dropdown.classList.remove('show');
                selectedIndex = -1;
            }
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!searchInput.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.classList.remove('show');
                selectedIndex = -1;
            }
        });
    }

    function updateSelection(items) {
        items.forEach((item, index) => {
            if (index === selectedIndex) {
                item.classList.add('active');
                item.scrollIntoView({ block: 'nearest' });
            } else {
                item.classList.remove('active');
            }
        });
    }

    function selectCity(cityName) {
        const searchInput = document.getElementById('locationSearch');
        const dropdown = document.getElementById('autocompleteDropdown');
        
        searchInput.value = cityName;
        dropdown.classList.remove('show');
        selectedIndex = -1;
        
        // Automatically search
        searchLocationWeather();
    }

    // Allow Enter key to search and initialize autocomplete
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('locationSearch');
        if (searchInput) {
            // Initialize autocomplete
            initAutocomplete();
            
            // Keep the original Enter key functionality as backup
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && selectedIndex === -1) {
                    searchLocationWeather();
                }
            });
        }
    });

    // Load cities in the destination section
    function loadCities() {
        const cityGrid = document.getElementById('cityGrid');
        if (!cityGrid) return;
        
        cityGrid.innerHTML = '';
        
        cities.forEach(city => {
            // Always show "sunny" on cards (as requested)
            const weatherClass = 'weather-sunny';
            const weatherIcon = 'sun';
            const weatherLabel = 'sunny';
            
            const cityCard = document.createElement('div');
            cityCard.className = 'city-card';
            cityCard.innerHTML = `
                <img src="${city.cardImage || city.images[0]}" alt="${city.name}">
                <div class="city-card-content">
                    <h3>${city.name}</h3>
                    <p>${city.description}</p>
                    <div class="mt-3">
                        <span class="weather-badge ${weatherClass}">
                            <i class="fas fa-${weatherIcon} me-1"></i>${weatherLabel}
                        </span>
                        <span class="weather-badge ${weatherClass}">
                            <i class="fas fa-temperature-high me-1"></i>${city.temperature}C
                        </span>
                    </div>
                    <div class="mt-2" style="font-size: 0.85rem; color: #666;">
                        <span title="Humidity"><i class="fas fa-tint me-1"></i>${city.humidity}%</span>
                        <span class="ms-2" title="Wind Speed"><i class="fas fa-wind me-1"></i>${city.windSpeed} km/h</span>
                        ${city.rainfall > 0 ? `<span class="ms-2" title="Rainfall"><i class="fas fa-cloud-rain me-1"></i>${city.rainfall}mm</span>` : ''}
                    </div>
                    <button class="book-now-btn" onclick="openBookingModalFromCity('${city.name}')">
                        <i class="fas fa-calendar-plus me-2"></i>Book Now
                    </button>
                </div>
            `;
            cityCard.onclick = (e) => {
                if (!e.target.classList.contains('book-now-btn') && !e.target.closest('.book-now-btn')) {
                    showCityDetails(city);
                }
            };
            cityGrid.appendChild(cityCard);
        });
    }

    // Show city details
    function showCityDetails(city) {
        selectedCity = city;
        const modal = document.getElementById('cityDetailsModal');
        const title = document.getElementById('cityDetailsTitle');
        const imageGallery = document.getElementById('cityImageGallery');
        const detailedWeather = document.getElementById('detailedWeather');
        const nearbyPlaces = document.getElementById('nearbyPlaces');
        const nearbyStays = document.getElementById('nearbyStays');
        const transportation = document.getElementById('transportation');
        
        if (!modal || !title) return;
        
        // Set title
        title.textContent = city.name;
        
        // Load images
        imageGallery.innerHTML = '';
        city.images.forEach(image => {
            const img = document.createElement('img');
            img.src = image; // Now using direct URLs
            img.alt = city.name;
            imageGallery.appendChild(img);
        });
        
        // Load detailed weather
        if (detailedWeather && city.weatherDescription) {
            const uvColor = city.uvIndex <= 2 ? 'success' : city.uvIndex <= 5 ? 'warning' : 'danger';
            const uvText = city.uvIndex <= 2 ? 'Low' : city.uvIndex <= 5 ? 'Moderate' : city.uvIndex <= 7 ? 'High' : 'Very High';
            
            detailedWeather.innerHTML = `
                <div class="weather-details-grid">
                    <div class="weather-detail-card primary">
                        <i class="fas fa-temperature-high"></i>
                        <div class="value">${city.temperature}C</div>
                        <div class="label">${city.weatherDescription}</div>
                        <small>Feels like ${city.feelsLike}C</small>
                    </div>
                    
                    <div class="weather-detail-card info">
                        <i class="fas fa-tint"></i>
                        <div class="value">${city.humidity}%</div>
                        <div class="label">Humidity</div>
                    </div>
                    
                    <div class="weather-detail-card success">
                        <i class="fas fa-wind"></i>
                        <div class="value">${city.windSpeed} km/h</div>
                        <div class="label">Wind ${city.windDirection}</div>
                    </div>
                    
                    <div class="weather-detail-card warning">
                        <i class="fas fa-compress-arrows-alt"></i>
                        <div class="value">${city.pressure} hPa</div>
                        <div class="label">Pressure</div>
                    </div>
                    
                    <div class="weather-detail-card info">
                        <i class="fas fa-eye"></i>
                        <div class="value">${city.visibility} km</div>
                        <div class="label">Visibility</div>
                    </div>
                    
                    <div class="weather-detail-card ${uvColor}">
                        <i class="fas fa-sun"></i>
                        <div class="value">${city.uvIndex}</div>
                        <div class="label">UV Index - ${uvText}</div>
                    </div>
                    
                    <div class="weather-detail-card primary">
                        <i class="fas fa-cloud"></i>
                        <div class="value">${city.cloudCover}%</div>
                        <div class="label">Cloud Cover</div>
                    </div>
                    
                    <div class="weather-detail-card info">
                        <i class="fas fa-umbrella"></i>
                        <div class="value">${city.precipitationChance}%</div>
                        <div class="label">Rain Chance</div>
                    </div>
                </div>
                
                <div class="sun-times">
                    <div class="sun-time">
                        <i class="fas fa-sunrise" style="color: #ff6b6b;"></i>
                        <div class="time">${city.sunrise}</div>
                        <div class="label">Sunrise</div>
                    </div>
                    <div class="sun-time">
                        <i class="fas fa-temperature-high" style="color: #dc3545;"></i>
                        <div class="time">${city.maxTemp}C / ${city.minTemp}C</div>
                        <div class="label">High / Low</div>
                    </div>
                    <div class="sun-time">
                        <i class="fas fa-sunset" style="color: #ff8c42;"></i>
                        <div class="time">${city.sunset}</div>
                        <div class="label">Sunset</div>
                    </div>
                </div>
                
                <h5 style="margin-top: 20px; color: var(--primary-color);">
                    <i class="fas fa-calendar-alt me-2"></i>3-Day Forecast
                </h5>
                <div class="forecast-container">
                    ${city.forecast ? city.forecast.map(day => `
                        <div class="forecast-card">
                            <div class="day">${day.day}</div>
                            <div class="temps">
                                <span class="max-temp">${day.maxTemp}</span> / 
                                <span class="min-temp">${day.minTemp}</span>
                            </div>
                            ${day.precipitation > 0 ? `
                                <div style="color: #0066cc; margin-top: 5px;">
                                    <i class="fas fa-cloud-rain"></i> ${day.precipitation}mm
                                </div>
                            ` : '<div style="color: #28a745; margin-top: 5px;"><i class="fas fa-sun"></i> No rain</div>'}
                        </div>
                    `).join('') : '<p>Forecast data not available</p>'}
                </div>
            `;
        }
        
        // Load nearby places
        nearbyPlaces.innerHTML = '';
        city.nearbyPlaces.forEach(place => {
            const placeItem = document.createElement('div');
            placeItem.className = 'info-item';
            placeItem.innerHTML = `
                <i class="fas fa-map-marker-alt"></i>
                <div>
                    <strong>${place.name}</strong>
                    <p class="mb-0 text-muted">${place.distance}</p>
                </div>
            `;
            nearbyPlaces.appendChild(placeItem);
        });
        
        // Load nearby stays
        nearbyStays.innerHTML = '';
        city.stays.forEach(stay => {
            const stayItem = document.createElement('div');
            stayItem.className = 'info-item';
            stayItem.innerHTML = `
                <i class="fas fa-bed"></i>
                <div>
                    <strong>${stay.name}</strong>
                    <p class="mb-0 text-muted">${stay.type}  ${stay.distance}</p>
                </div>
            `;
            nearbyStays.appendChild(stayItem);
        });
        
        // Load transportation
        transportation.innerHTML = '';
        city.transportation.forEach(trans => {
            const transItem = document.createElement('div');
            transItem.className = 'info-item';
            transItem.innerHTML = `
                <i class="fas fa-${trans.name.toLowerCase().includes('railway') ? 'train' : 
                                     trans.name.toLowerCase().includes('bus') ? 'bus' : 'plane'}"></i>
                <div>
                    <strong>${trans.name}</strong>
                    <p class="mb-0 text-muted">${trans.distance}</p>
                </div>
            `;
            transportation.appendChild(transItem);
        });
        
        // Show modal and lock body scroll
        modal.style.display = 'block';
        document.body.classList.add('modal-open');
    }

    // Close city details modal
    function closeCityDetails() {
        const modal = document.getElementById('cityDetailsModal');
        if (modal) {
            modal.style.display = 'none';
            document.body.classList.remove('modal-open');
        }
    }

    // Open booking modal
    function openBookingModal() {
        if (selectedCity) {
            document.getElementById('bookingDestination').value = selectedCity.name;
        }
        const modal = document.getElementById('bookingModal');
        if (modal) {
            modal.style.display = 'block';
            document.body.classList.add('modal-open');
        }
    }

    // Open booking modal from city card
    function openBookingModalFromCity(cityName) {
        document.getElementById('bookingDestination').value = cityName;
        const modal = document.getElementById('bookingModal');
        if (modal) {
            modal.style.display = 'block';
            document.body.classList.add('modal-open');
        }
    }

    // Close booking modal
    function closeBookingModal() {
        const modal = document.getElementById('bookingModal');
        if (modal) {
            modal.style.display = 'none';
            document.body.classList.remove('modal-open');
        }
    }

    // Handle booking submission
    function handleBookingSubmit(event) {
        event.preventDefault();
        
        const bookingData = {
            id: bookingIdCounter++,
            name: document.getElementById('bookingName').value,
            email: document.getElementById('bookingEmail').value,
            phone: document.getElementById('bookingPhone').value,
            members: document.getElementById('bookingMembers').value,
            destination: document.getElementById('bookingDestination').value,
            arrival: document.getElementById('bookingArrival').value,
            status: "confirmed"
        };
        
        // Add to bookings array
        bookings.push(bookingData);
        
        // Close booking modal
        closeBookingModal();
        
        // Show random tourism quote
        showTourismQuote();
        
        // Show success notification
        showNotification('Booking confirmed! Check your email for details.', 'success');
        
        // Reset form
        event.target.reset();
        
        console.log("New booking created:", bookingData);
    }

    // Show tourism quote
    function showTourismQuote() {
        const randomQuote = tourismQuotes[Math.floor(Math.random() * tourismQuotes.length)];
        const quoteDisplay = document.getElementById('quoteDisplay');
        
        if (!quoteDisplay) return;
        
        document.getElementById('quoteText').textContent = randomQuote.text;
        document.getElementById('quoteAuthor').textContent = `- ${randomQuote.author}`;
        
        quoteDisplay.style.display = 'block';
        
        // Auto-close after 8 seconds
        setTimeout(() => {
            closeQuoteDisplay();
        }, 8000);
    }

    // Close quote display
    function closeQuoteDisplay() {
        const quoteDisplay = document.getElementById('quoteDisplay');
        if (quoteDisplay) {
            quoteDisplay.style.display = 'none';
        }
    }

    // Open feedback modal
    function openFeedbackModal() {
        const modal = document.getElementById('feedbackModal');
        if (modal) {
            modal.style.display = 'block';
            document.body.classList.add('modal-open');
        }
    }

    // Close feedback modal
    function closeFeedbackModal() {
        const modal = document.getElementById('feedbackModal');
        if (modal) {
            modal.style.display = 'none';
            document.body.classList.remove('modal-open');
        }
        resetFeedbackForm();
    }

    // Reset feedback form
    function resetFeedbackForm() {
        document.getElementById('feedbackName').value = '';
        document.getElementById('feedbackDestination').value = '';
        document.getElementById('feedbackMessage').value = '';
        selectedRating = 0;
        updateRatingDisplay();
    }

    // Set rating
    function setRating(rating) {
        selectedRating = rating;
        updateRatingDisplay();
    }

    // Update rating display
    function updateRatingDisplay() {
        const stars = document.querySelectorAll('#ratingInput i');
        stars.forEach((star, index) => {
            if (index < selectedRating) {
                star.classList.add('active');
            } else {
                star.classList.remove('active');
            }
        });
    }

    // Handle feedback submission
    function handleFeedbackSubmit(event) {
        event.preventDefault();
        
        if (selectedRating === 0) {
            showNotification('Please select a rating', 'error');
            return;
        }
        
        const feedbackData = {
            id: feedbackIdCounter++,
            name: document.getElementById('feedbackName').value,
            destination: document.getElementById('feedbackDestination').value,
            rating: selectedRating,
            message: document.getElementById('feedbackMessage').value,
            date: new Date().toISOString().split('T')[0]
        };
        
        // Add to feedbacks array
        feedbacks.unshift(feedbackData);
        
        // Update feedback list
        loadFeedbackList();
        
        // Close feedback modal
        closeFeedbackModal();
        
        // Show success notification
        showNotification('Thank you for your feedback! We appreciate your input.', 'success');
        
        console.log("New feedback submitted:", feedbackData);
    }

    // Load feedback list
    function loadFeedbackList() {
        const feedbackList = document.getElementById('feedbackList');
        if (!feedbackList) return;
        
        feedbackList.innerHTML = '';
        
        if (feedbacks.length === 0) {
            feedbackList.innerHTML = '<p class="text-center text-muted">No feedback yet. Be the first to share your experience!</p>';
            return;
        }
        
        feedbacks.forEach(feedback => {
            const feedbackItem = document.createElement('div');
            feedbackItem.className = 'feedback-item';
            
            let stars = '';
            for (let i = 0; i < 5; i++) {
                if (i < feedback.rating) {
                    stars += '<i class="fas fa-star"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            
            feedbackItem.innerHTML = `
                <div class="feedback-header">
                    <span class="feedback-author">${feedback.name}</span>
                    <span class="feedback-date">${feedback.date}</span>
                </div>
                <div class="feedback-destination">
                    <i class="fas fa-map-marker-alt me-1"></i>${feedback.destination}
                </div>
                <div class="feedback-content">
                    ${feedback.message}
                </div>
                <div class="rating">
                    ${stars}
                </div>
            `;
            feedbackList.appendChild(feedbackItem);
        });
    }

    // Open booking management
    function openBookingManagement() {
        loadUserBookings();
        const modal = document.getElementById('bookingManagementModal');
        if (modal) {
            modal.style.display = 'block';
            document.body.classList.add('modal-open');
        }
    }

    // Open admin booking management
    function openAdminBookingManagement() {
        loadAllBookings();
        const modal = document.getElementById('bookingManagementModal');
        if (modal) {
            modal.style.display = 'block';
            document.body.classList.add('modal-open');
        }
    }

    // Close booking management
    function closeBookingManagement() {
        const modal = document.getElementById('bookingManagementModal');
        if (modal) {
            modal.style.display = 'none';
            document.body.classList.remove('modal-open');
        }
    }

    // Load user bookings
    function loadUserBookings() {
        const bookingList = document.getElementById('bookingList');
        if (!bookingList) return;
        
        bookingList.innerHTML = '';
        
        if (bookings.length === 0) {
            bookingList.innerHTML = '<p class="text-center text-muted">No bookings found</p>';
            return;
        }
        
        bookings.forEach(booking => {
            const bookingItem = document.createElement('div');
            bookingItem.className = 'booking-item';
            bookingItem.innerHTML = `
                <div class="booking-header">
                    <span class="booking-id">Booking #${booking.id}</span>
                    <span class="booking-status status-${booking.status}">${booking.status}</span>
                </div>
                <div class="booking-details">
                    <div class="booking-detail-item">
                        <i class="fas fa-user"></i>
                        <span>${booking.name}</span>
                    </div>
                    <div class="booking-detail-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${booking.destination}</span>
                    </div>
                    <div class="booking-detail-item">
                        <i class="fas fa-users"></i>
                        <span>${booking.members} members</span>
                    </div>
                    <div class="booking-detail-item">
                        <i class="fas fa-calendar"></i>
                        <span>${new Date(booking.arrival).toLocaleString()}</span>
                    </div>
                </div>
                <div class="booking-actions">
                    <button class="btn-action btn-modify" onclick="modifyBooking(${booking.id})">
                        <i class="fas fa-edit me-1"></i>Modify
                    </button>
                    <button class="btn-action btn-cancel" onclick="cancelBooking(${booking.id})">
                        <i class="fas fa-times me-1"></i>Cancel
                    </button>
                </div>
            `;
            bookingList.appendChild(bookingItem);
        });
    }

    // Load all bookings for admin
    function loadAllBookings() {
        const bookingList = document.getElementById('bookingList');
        if (!bookingList) return;
        
        bookingList.innerHTML = '';
        
        // Sample admin bookings
        const allBookings = [
            ...bookings,
            {
                id: bookingIdCounter++,
                name: "Jane Smith",
                email: "jane@example.com",
                phone: "9876543211",
                members: 3,
                destination: "Udupi",
                arrival: "2023-12-18T12:00",
                status: "confirmed"
            }
        ];
        
        allBookings.forEach(booking => {
            const bookingItem = document.createElement('div');
            bookingItem.className = 'booking-item';
            bookingItem.innerHTML = `
                <div class="booking-header">
                    <span class="booking-id">Booking #${booking.id}</span>
                    <span class="booking-status status-${booking.status}">${booking.status}</span>
                </div>
                <div class="booking-details">
                    <div class="booking-detail-item">
                        <i class="fas fa-user"></i>
                        <span>${booking.name}</span>
                    </div>
                    <div class="booking-detail-item">
                        <i class="fas fa-envelope"></i>
                        <span>${booking.email}</span>
                    </div>
                    <div class="booking-detail-item">
                        <i class="fas fa-phone"></i>
                        <span>${booking.phone}</span>
                    </div>
                    <div class="booking-detail-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${booking.destination}</span>
                    </div>
                    <div class="booking-detail-item">
                        <i class="fas fa-users"></i>
                        <span>${booking.members} members</span>
                    </div>
                    <div class="booking-detail-item">
                        <i class="fas fa-calendar"></i>
                        <span>${new Date(booking.arrival).toLocaleString()}</span>
                    </div>
                </div>
            `;
            bookingList.appendChild(bookingItem);
        });
    }

    // Modify booking
    function modifyBooking(bookingId) {
        const booking = bookings.find(b => b.id === bookingId);
        if (booking) {
            // Open booking modal with existing data
            document.getElementById('bookingName').value = booking.name;
            document.getElementById('bookingEmail').value = booking.email;
            document.getElementById('bookingPhone').value = booking.phone;
            document.getElementById('bookingMembers').value = booking.members;
            document.getElementById('bookingDestination').value = booking.destination;
            document.getElementById('bookingArrival').value = booking.arrival;
            
            // Remove old booking
            bookings = bookings.filter(b => b.id !== bookingId);
            
            // Close booking management and open booking modal
            closeBookingManagement();
            openBookingModal();
            
            showNotification('Modify your booking details and submit', 'success');
        }
    }

    // Cancel booking
    function cancelBooking(bookingId) {
        if (confirm('Are you sure you want to cancel this booking?')) {
            bookings = bookings.filter(b => b.id !== bookingId);
            loadUserBookings();
            showNotification('Booking cancelled successfully', 'success');
        }
    }

    // Open destination management
    function openDestinationManagement() {
        loadDestinationList();
        const modal = document.getElementById('destinationManagementModal');
        if (modal) {
            modal.style.display = 'block';
            document.body.classList.add('modal-open');
        }
    }

    // Close destination management
    function closeDestinationManagement() {
        const modal = document.getElementById('destinationManagementModal');
        if (modal) {
            modal.style.display = 'none';
            document.body.classList.remove('modal-open');
        }
    }

    // Switch destination tab
    function switchDestinationTab(tab) {
        const tabs = document.querySelectorAll('.destination-tab');
        const forms = document.querySelectorAll('.destination-form');
        
        tabs.forEach(t => t.classList.remove('active'));
        forms.forEach(f => f.classList.remove('active'));
        
        if (tab === 'add') {
            tabs[0].classList.add('active');
            document.getElementById('addDestinationForm').classList.add('active');
        } else {
            tabs[1].classList.add('active');
            document.getElementById('updateDestinationForm').classList.add('active');
        }
    }

    // Load destination list
    function loadDestinationList() {
        const destinationList = document.getElementById('destinationList');
        if (!destinationList) return;
        
        destinationList.innerHTML = '';
        
        cities.forEach(city => {
            const destinationItem = document.createElement('div');
            destinationItem.className = 'destination-item';
            destinationItem.innerHTML = `
                <div class="destination-info">
                    <h4>${city.name}</h4>
                    <p>${city.description}</p>
                </div>
                <div class="destination-actions">
                    <button class="btn-edit" onclick="editDestination(${city.id})">
                        <i class="fas fa-edit me-1"></i>Edit
                    </button>
                    <button class="btn-delete" onclick="deleteDestination(${city.id})">
                        <i class="fas fa-trash me-1"></i>Delete
                    </button>
                </div>
            `;
            destinationList.appendChild(destinationItem);
        });
    }

    // Handle add destination
    function handleAddDestination(event) {
        event.preventDefault();
        
        const newDestination = {
            id: cities.length + 1,
            name: document.getElementById('newDestName').value,
            description: document.getElementById('newDestDescription').value,
            weather: document.getElementById('newDestWeather').value,
            temperature: 25,
            humidity: 70,
            windSpeed: 10,
            rainfall: 0,
            images: [document.getElementById('newDestImage').value || 'newdest'],
            nearbyPlaces: [],
            stays: [],
            transportation: []
        };
        
        cities.push(newDestination);
        loadCities();
        loadDestinationList();
        
        // Reset form
        event.target.reset();
        
        showNotification('Destination added successfully!', 'success');
    }

    // Edit destination
    function editDestination(cityId) {
        const city = cities.find(c => c.id === cityId);
        if (city) {
            // Switch to add form with existing data
            switchDestinationTab('add');
            document.getElementById('newDestName').value = city.name;
            document.getElementById('newDestDescription').value = city.description;
            document.getElementById('newDestWeather').value = city.weather;
            
            // Remove old destination
            cities = cities.filter(c => c.id !== cityId);
            
            showNotification('Update destination details and submit', 'success');
        }
    }

    // Delete destination
    function deleteDestination(cityId) {
        if (confirm('Are you sure you want to delete this destination?')) {
            cities = cities.filter(c => c.id !== cityId);
            loadCities();
            loadDestinationList();
            showNotification('Destination deleted successfully', 'success');
        }
    }

    // ========== UI FUNCTIONS ==========

    // Show different sections
    function showSection(section) {
        // Hide all sections
        const sections = [
            'homeSection', 'authSection', 'dashboardSection', 
            'destinationsSection', 'aboutSection', 'contactSection'
        ];
        
        sections.forEach(sectionId => {
            const element = document.getElementById(sectionId);
            if (element) {
                element.style.display = 'none';
            }
        });
        
        // Show selected section
        const targetSection = document.getElementById(section + 'Section');
        if (targetSection) {
            targetSection.style.display = 'block';
        }
        
        // Close profile menu
        document.getElementById('profileMenu').classList.remove('show');
    }

    // Show auth section
    function showAuthSection() {
        showSection('auth');
        switchAuthTab('login');
    }

    // Toggle profile menu
    function toggleProfileMenu() {
        const profileMenu = document.getElementById('profileMenu');
        if (profileMenu) {
            profileMenu.classList.toggle('show');
        }
    }

    // Show notification
    function showNotification(message, type) {
        const notification = document.getElementById('notificationToast');
        const notificationMessage = document.getElementById('notificationMessage');
        const icon = notification.querySelector('i');
        
        if (!notification || !notificationMessage) return;
        
        // Set message
        notificationMessage.textContent = message;
        
        // Set type
        notification.className = 'notification-toast show ' + type;
        
        // Set icon
        if (type === 'success') {
            icon.className = 'fas fa-check-circle';
        } else if (type === 'error') {
            icon.className = 'fas fa-exclamation-circle';
        }
        
        // Hide after 3 seconds
        setTimeout(() => {
            notification.classList.remove('show');
        }, 3000);
    }

    // Handle contact form
    function handleContactForm(event) {
        event.preventDefault();
        
        const name = document.getElementById('contactName').value;
        const email = document.getElementById('contactEmail').value;
        const subject = document.getElementById('contactSubject').value;
        const message = document.getElementById('contactMessage').value;
        
        // Simulate form submission
        showNotification('Your message has been sent successfully!', 'success');
        
        // Reset form
        event.target.reset();
    }

    // ========== EVENT LISTENERS ==========

    // Close profile menu when clicking outside
    document.addEventListener('click', function(event) {
        const profileDropdown = document.querySelector('.profile-dropdown');
        const profileMenu = document.getElementById('profileMenu');
        
        if (profileDropdown && profileMenu && !profileDropdown.contains(event.target)) {
            profileMenu.classList.remove('show');
        }
    });

    // Close modals when clicking outside
    window.addEventListener('click', function(event) {
        const modals = [
            'cityDetailsModal', 'bookingModal', 'feedbackModal', 
            'bookingManagementModal', 'destinationManagementModal'
        ];
        
        modals.forEach(modalId => {
            const modal = document.getElementById(modalId);
            if (modal && event.target === modal) {
                modal.style.display = 'none';
                document.body.classList.remove('modal-open');
            }
        });
    });

    // Dashboard functions
    function showViewFeedback() {
        showNotification('Loading feedback...', 'success');
        // Scroll to feedback section
        const feedbackSection = document.querySelector('.feedback-section');
        if (feedbackSection) {
            feedbackSection.scrollIntoView({ behavior: 'smooth' });
        }
    }
</script>







</body>
</html>